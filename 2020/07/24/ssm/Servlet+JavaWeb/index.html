<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Servlet详解 - MilkLc</title><meta description="一、Servlet作用 接收请求 处理请求 完成响应  二、Servlet创建和使用流程1、创建类继承HttpServlet 12345678public class OneServlet extends HttpServlet &amp;amp;#123;    @Override    protected void doPost(HttpServletRequest request, HttpServletR"><meta property="og:type" content="blog"><meta property="og:title" content="Servlet详解"><meta property="og:url" content="http://yoursite.com/2020/07/24/ssm/Servlet+JavaWeb/"><meta property="og:site_name" content="MilkLc"><meta property="og:description" content="一、Servlet作用 接收请求 处理请求 完成响应  二、Servlet创建和使用流程1、创建类继承HttpServlet 12345678public class OneServlet extends HttpServlet &amp;amp;#123;    @Override    protected void doPost(HttpServletRequest request, HttpServletR"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://img.louchen.top/2020/07/20200704212048.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200704212734.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200705231631.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200705231808.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200705232229.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200706000202.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200706000814.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200706001016.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200706095350.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200706095543.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200706095745.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200706153224.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200706153522.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200707092616.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200708104915.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200708104942.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200708105250.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200708105403.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200708105403.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200708173932.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200708215648.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200709100848.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200709101044.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200709110428.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200709110549.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200709110748.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200709110934.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200709111119.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200709111315.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200709111937.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200709112557.png"><meta property="article:published_time" content="2020-07-24T15:14:32.979Z"><meta property="article:modified_time" content="2020-07-24T13:47:57.557Z"><meta property="article:author" content="lc"><meta property="article:tag" content="Servlet"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="http://img.louchen.top/2020/07/20200704212048.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://yoursite.com/2020/07/24/ssm/Servlet+JavaWeb/"},"headline":"MilkLc","image":["http://img.louchen.top/2020/07/20200704212048.png","http://img.louchen.top/2020/07/20200704212734.png","http://img.louchen.top/2020/07/20200705231631.png","http://img.louchen.top/2020/07/20200705231808.png","http://img.louchen.top/2020/07/20200705232229.png","http://img.louchen.top/2020/07/20200706000202.png","http://img.louchen.top/2020/07/20200706000814.png","http://img.louchen.top/2020/07/20200706001016.png","http://img.louchen.top/2020/07/20200706095350.png","http://img.louchen.top/2020/07/20200706095543.png","http://img.louchen.top/2020/07/20200706095745.png","http://img.louchen.top/2020/07/20200706153224.png","http://img.louchen.top/2020/07/20200706153522.png","http://img.louchen.top/2020/07/20200707092616.png","http://img.louchen.top/2020/07/20200708104915.png","http://img.louchen.top/2020/07/20200708104942.png","http://img.louchen.top/2020/07/20200708105250.png","http://img.louchen.top/2020/07/20200708105403.png","http://img.louchen.top/2020/07/20200708105403.png","http://img.louchen.top/2020/07/20200708173932.png","http://img.louchen.top/2020/07/20200708215648.png","http://img.louchen.top/2020/07/20200709100848.png","http://img.louchen.top/2020/07/20200709101044.png","http://img.louchen.top/2020/07/20200709110428.png","http://img.louchen.top/2020/07/20200709110549.png","http://img.louchen.top/2020/07/20200709110748.png","http://img.louchen.top/2020/07/20200709110934.png","http://img.louchen.top/2020/07/20200709111119.png","http://img.louchen.top/2020/07/20200709111315.png","http://img.louchen.top/2020/07/20200709111937.png","http://img.louchen.top/2020/07/20200709112557.png"],"datePublished":"2020-07-24T15:14:32.979Z","dateModified":"2020-07-24T13:47:57.557Z","author":{"@type":"Person","name":"lc"},"description":"一、Servlet作用 接收请求 处理请求 完成响应  二、Servlet创建和使用流程1、创建类继承HttpServlet 12345678public class OneServlet extends HttpServlet &amp;#123;    @Override    protected void doPost(HttpServletRequest request, HttpServletR"}</script><link rel="canonical" href="http://yoursite.com/2020/07/24/ssm/Servlet+JavaWeb/"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/favicon.ico" alt="MilkLc" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/RoyalNeverG"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><input placeholder="你想要查找什么？" type="text"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-07-24T15:14:32.979Z" title="2020-07-24T15:14:32.979Z">2020-07-24</time><span class="level-item"><a class="link-muted" href="/categories/JavaWeb/">JavaWeb</a></span><span class="level-item">1 小时 读完 (大约 12607 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">Servlet详解</h1><div class="content"><h3 id="一、Servlet作用"><a href="#一、Servlet作用" class="headerlink" title="一、Servlet作用"></a>一、Servlet作用</h3><ul>
<li>接收请求</li>
<li>处理请求</li>
<li>完成响应</li>
</ul>
<h3 id="二、Servlet创建和使用流程"><a href="#二、Servlet创建和使用流程" class="headerlink" title="二、Servlet创建和使用流程"></a>二、Servlet创建和使用流程</h3><p>1、创建类继承<code>HttpServlet</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OneServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>2、在<code>web.xml</code>配置Servlet位置和地址映射 </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"4.0"</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--tomcat初始化打开的页面--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>/index.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>/index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--将servlet接口实现类类路径地址交给tomcat    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 为我们自定义的Servlet起一个名称--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>OneServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        该servlet具体的包下的地址--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.lc.controller.OneServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--  load-on-startup元素标记容器是否在启动的时候就加载这个servlet(实例化并调用其init()方法)。</span></span><br><span class="line"><span class="comment">        当值小于0或者没有指定时，则表示容器在该Servlet被请求时，才会去加载。</span></span><br><span class="line"><span class="comment">        正数的值越小，该Servlet的优先级就越高，应用启动时就优先加载。</span></span><br><span class="line"><span class="comment">        当值相同的时候，容器就会自己选择优先加载。--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--tomcat启动时就会创建 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    为自定义servlet配置地址映射--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        指定servlet--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>OneServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        指定请求地址--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/one<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="三、Servlet生命周期"><a href="#三、Servlet生命周期" class="headerlink" title="三、Servlet生命周期"></a>三、Servlet生命周期</h3><p>1、初始化init()。Servlet对象只会初始化一次</p>
<ul>
<li><p>若Servlet指定load-on-startup的配置，则在tomcat服务器启动时 该Servlet即被初始化</p>
</li>
<li><p>若Servlet没有指定load-on-startup配置，则在第一次请求时初始化Servlet</p>
<ul>
<li><pre><code class="xml"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span>
    <span class="comment">&lt;!-- 为我们自定义的Servlet起一个名称--&gt;</span>
    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>OneServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>
    <span class="comment">&lt;!--        该servlet具体的包下的地址--&gt;</span>
    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.lc.controller.OneServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span>
    <span class="comment">&lt;!--  load-on-startup元素标记容器是否在启动的时候就加载这个servlet(实例化并调用其init()方法)。</span>
<span class="comment">    当值小于0或者没有指定时，则表示容器在该Servlet被请求时，才会去加载。</span>
<span class="comment">    正数的值越小，该Servlet的优先级就越高，应用启动时就优先加载。</span>
<span class="comment">    当值相同的时候，容器就会自己选择优先加载。--&gt;</span>
    <span class="comment">&lt;!--tomcat启动时就会创建 --&gt;</span>
    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span>
<span class="tag">&lt;/<span class="name">servlet</span>&gt;</span>
<span class="comment"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2、调用service()方法，处理post或者get及其他请求。每次请求都会调用该service方法</span><br><span class="line"></span><br><span class="line">3、调用destory()方法，当服务区关闭时就会调用此方法。该方法只会在服务器结束时调用一次</span><br><span class="line"></span><br><span class="line">**注意：**</span><br><span class="line"></span><br><span class="line">- Servlet为单实例多线程，所有不要在Servlet实例中写共享变量。</span><br><span class="line"></span><br><span class="line">### 四、HttpServletResponse和HttpServletRequest</span><br><span class="line"></span><br><span class="line">&#96;HttpServletResponse&#96;封装服务端返回给浏览器的数据</span><br><span class="line"></span><br><span class="line">&#96;HttpServletRequest&#96;封装客户端请求的数据</span><br><span class="line"></span><br><span class="line">#### **1、HttpServletResponse**</span><br><span class="line"></span><br><span class="line">##### ***1)向客户端返回中文数据***</span><br><span class="line"></span><br><span class="line">浏览器根据不同的响应体中的ContentType类型类解析不同的二进制数据</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;java</span><br><span class="line">@Override</span><br><span class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        &#x2F;&#x2F;根据响应体对象返回数据给浏览器 注意：必须先指定字符编码 然后获取PrintWriter流对象。</span><br><span class="line">        response.setContentType(&quot;text&#x2F;html;charset&#x3D;UTF-8&quot;);</span><br><span class="line">        PrintWriter printWriter &#x3D; response.getWriter();</span><br><span class="line">        printWriter.write(&quot;hello world&lt;br&#x2F;&gt;&quot;);</span><br><span class="line">        printWriter.write(&quot;你好世界！&quot;);</span><br><span class="line">        printWriter.flush();</span><br><span class="line">        printWriter.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></span>
</code></pre>
</li>
</ul>
</li>
</ul>
<h5 id="2-重定向其它地址"><a href="#2-重定向其它地址" class="headerlink" title="2)重定向其它地址"></a><strong><em>2)重定向其它地址</em></strong></h5><p>浏览器会</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//重定向到我们项目下的指定页面</span></span><br><span class="line">    resp.sendRedirect(<span class="string">"success.html"</span>);</span><br><span class="line">    <span class="comment">//重定向到我们指定的地址</span></span><br><span class="line">    <span class="comment">//resp.sendRedirect("http://www.baidu.com");</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-若禁用cookie，可采用编码重定向"><a href="#3-若禁用cookie，可采用编码重定向" class="headerlink" title="3)若禁用cookie，可采用编码重定向"></a>3)若禁用cookie，可采用编码重定向</h5><p>详细参考cookie禁用</p>
<p>使用<strong>response</strong>中的<code>encodeRedirectURL()</code>方法优化其请求路径。自动判断，如果禁用cookie则帮我们携带上session否则不会携带</p>
<ul>
<li><code>&lt;a href=&quot;&lt;%=response.encodeRedirectURL(&quot;sessiontest.jsp&quot;)%&gt;&quot;&gt;去其他页面&lt;/a&gt;</code></li>
</ul>
<h5 id="4-获取响应流对象"><a href="#4-获取响应流对象" class="headerlink" title="4)获取响应流对象"></a>4)获取响应流对象</h5><p>一般用作文件下载。详细参考文件下载</p>
<h4 id="2、HttpServletRequest"><a href="#2、HttpServletRequest" class="headerlink" title="2、HttpServletRequest"></a><strong>2、HttpServletRequest</strong></h4><h5 id="1-获取请求参数"><a href="#1-获取请求参数" class="headerlink" title="1)获取请求参数"></a><strong>1)获取请求参数</strong></h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">"/one"</span> method=<span class="string">"get"</span>&gt;</span><br><span class="line">    用户名&lt;input type=<span class="string">"text"</span> name=<span class="string">"username"</span>&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;h1&gt;POST请求&lt;/h1&gt;</span><br><span class="line">&lt;form action=<span class="string">"/one"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">    用户名&lt;input type=<span class="string">"text"</span> name=<span class="string">"username"</span>&gt;&lt;br/&gt;</span><br><span class="line">    爱好: 篮球&lt;input type=<span class="string">"checkbox"</span> name=<span class="string">"interest"</span> value=<span class="string">"lanqiu"</span>&gt;</span><br><span class="line">    足球&lt;input type=<span class="string">"checkbox"</span> name=<span class="string">"interest"</span> value=<span class="string">"zuqiu"</span>&gt;</span><br><span class="line">    排球&lt;input type=<span class="string">"checkbox"</span> name=<span class="string">"interest"</span> value=<span class="string">"paiqiu"</span>&gt;</span><br><span class="line">    性别：</span><br><span class="line">    男：&lt;input type=<span class="string">"radio"</span> name=<span class="string">"gender"</span> value=<span class="string">"male"</span>&gt;</span><br><span class="line">    女：&lt;input type=<span class="string">"radio"</span> name=<span class="string">"gender"</span> value=<span class="string">"female"</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        req.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">        <span class="comment">//1、获取单个值 文本框，单选框</span></span><br><span class="line">        String username = req.getParameter(<span class="string">"username"</span>);</span><br><span class="line">        String gender = req.getParameter(<span class="string">"gender"</span>);</span><br><span class="line">        System.out.println(username);</span><br><span class="line">        System.out.println(gender);</span><br><span class="line">        <span class="comment">//2、获取某个参数的多个值，例如多选框</span></span><br><span class="line">        String[] interests = req.getParameterValues(<span class="string">"interest"</span>);</span><br><span class="line">        System.out.println(Arrays.toString(interests));</span><br><span class="line">        <span class="comment">//3、获取请求头信息</span></span><br><span class="line">        System.out.println(req.getHeader(<span class="string">"Host"</span>));</span><br><span class="line">        System.out.println(req.getHeader(<span class="string">"Content-Type"</span>));</span><br><span class="line">        System.out.println(req.getHeader(<span class="string">"Accept"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-get和post请求处理乱码方式"><a href="#2-get和post请求处理乱码方式" class="headerlink" title="2)get和post请求处理乱码方式"></a><strong><em>2)get和post请求处理乱码方式</em></strong></h5><ul>
<li><strong>GET请求</strong></li>
</ul>
<p>①浏览器地址栏默认使用ISO-8859-1进行编码，所以我们需要用对应的编码格式解码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//解决get请求乱码</span></span><br><span class="line">    System.out.println(<span class="keyword">new</span> String(req.getParameter(<span class="string">"username"</span>).getBytes(<span class="string">"ISO-8859-1"</span>),<span class="string">"utf-8"</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>②修改tomcat的解码规则</p>
<p>找到tomcat安装路径下的<strong>conf/server.xml</strong>文件：</p>
<p>在下列标签加入：<code>URIEncoding=&quot;utf-8&quot;</code> 即可</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">connectionTimeout</span>=<span class="string">"30000"</span> <span class="attr">port</span>=<span class="string">"8080"</span> <span class="attr">protocol</span>=<span class="string">"HTTP/1.1"</span> <span class="attr">redirectPort</span>=<span class="string">"8443"</span> <span class="attr">URIEncoding</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>PSOT请求</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//解决请求乱码  重新设置请求的编码格式，浏览器和我们服务器的编码和解码的格式不一致，所以我们需要在获取请求参数之前，同一设置编码格式</span></span><br><span class="line">    req.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//第一种方式：设置文本类型并设置编码格式</span></span><br><span class="line">    req.setContentType(<span class="string">"text/html;charset=utf-8"</span>);</span><br><span class="line">    <span class="comment">//第二种方式：设置响应头</span></span><br><span class="line">    <span class="comment">//req.addHeader("Content-Type","text/html;charset=utf-8");</span></span><br><span class="line">    <span class="comment">//必须在获得PrintWriter流之前设置请求编码   </span></span><br><span class="line">    PrintWriter printWriter = req.getWriter();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在我们设置响应的编码格式时：只需要设置<strong>内容类型</strong>和<strong>编码格式</strong>就行。</p>
<h5 id="3-请求转发"><a href="#3-请求转发" class="headerlink" title="3)请求转发"></a>3)请求转发</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//转发到指定路径或请求</span></span><br><span class="line">        RequestDispatcher requestDispatcher = req.getRequestDispatcher(<span class="string">"success.html"</span>);</span><br><span class="line">        <span class="comment">//若转发到page/success.html页面，则：</span></span><br><span class="line">        <span class="comment">//req.getRequestDispatcher("page/success.html");</span></span><br><span class="line">        <span class="comment">//并转发请求和响应参数</span></span><br><span class="line">        requestDispatcher.forward(req, resp);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-获得项目路径"><a href="#3-获得项目路径" class="headerlink" title="3)获得项目路径"></a>3)获得项目路径</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  /servlet_test</span></span><br><span class="line">String contextPath1 = req.getContextPath();</span><br></pre></td></tr></table></figure>

<h5 id="4-获取请求地址"><a href="#4-获取请求地址" class="headerlink" title="4)获取请求地址"></a>4)获取请求地址</h5><p><code>request.getRequestURI();</code>  获取请求的URI  不包含项目路径</p>
<p><code>request.getRequestURL();</code> 获取请求的URL 包含项目路径(全路径)</p>
<h5 id="5-获取请求流对象"><a href="#5-获取请求流对象" class="headerlink" title="5)获取请求流对象"></a>5)获取请求流对象</h5><ul>
<li>若请求的enctytpe类型为 enctype=”application/x-www-form-urlencoded”  <ul>
<li>则流ServletInputStream流中存储的为 请求参数和值。</li>
</ul>
</li>
<li>若请求的enctytpe类型为 enctype=”multipart/form-data”  <ul>
<li>则流ServletInputStream中存储为 一段段数据部分。</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ServletInputStream inputStream1 = request.getInputStream();</span><br></pre></td></tr></table></figure>

<h4 id="3、转发和重定向的区别"><a href="#3、转发和重定向的区别" class="headerlink" title="3、转发和重定向的区别"></a>3、转发和重定向的区别</h4><ul>
<li><p>转发(HttpServletRequest对象)</p>
<ul>
<li>地址栏的路径不会更改</li>
<li>请求只会发生一次，即getRequestDispatcher(“success.html”)中的路径不会请求，只转发相应的请求和响应对象即可。</li>
<li>服务器内部完成</li>
<li>可以共享请求域数据(HttpServletRequest和HttpServletResponse)</li>
<li>必须是当前服务器的资源</li>
<li>可以访问WEB-IN下的资源</li>
</ul>
</li>
<li><p>重定向(HttpServletResponse对象)</p>
<ul>
<li>地址栏会变成getRequestDispatcher(“success.html”)中指定的转发路径</li>
<li>会发生两次请求</li>
<li>浏览器完成</li>
<li>不可以共享请求域数据(HttpServletRequest和HttpServletResponse)</li>
<li>可以是外部的资源</li>
<li>不可以访问WEB-IN下的资源</li>
</ul>
</li>
</ul>
<p>注意：我们只能一个请求对应一个响应，而且先处理请求操作再处理响应操作，不能有多个响应或者请求转发操作。</p>
<h3 id="五、项目路径问题"><a href="#五、项目路径问题" class="headerlink" title="五、项目路径问题"></a>五、项目路径问题</h3><p>我们一般新建javaweb选择，选择打包的方式：</p>
<img src="http://img.louchen.top/2020/07/20200704212048.png" style="zoom:67%;" />



<img src="http://img.louchen.top/2020/07/20200704212734.png" style="zoom: 67%;" />

<p>上面的Application context：<strong>/servlet_test</strong>  默认为项目名称。可以把其设置为 <strong>/</strong>  即可</p>
<p>我们的Servlet在进行地址解析的时候web.xml中的地址解析为：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>TwoServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--其中的 / 代表的是当前项目的路径 即http://localhost:8081/servlet_test/ 这也是为什么我们无需在页面访问时加 / 的原因了--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/two<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="1、项目路径和服务器路径的区别："><a href="#1、项目路径和服务器路径的区别：" class="headerlink" title="1、项目路径和服务器路径的区别："></a>1、项目路径和服务器路径的区别：</h4><p>项目路径：<a href="http://localhost:8081/servlet_test/">http://localhost:8081/servlet_test/</a>   携带项目名称</p>
<p>服务器路径：<a href="http://localhost:8081/">http://localhost:8081/</a>  以我们tomcat服务器的路径，不携带项目名称</p>
<h4 id="2、页面路径访问问题-在页面请求中访问servlet也如此"><a href="#2、页面路径访问问题-在页面请求中访问servlet也如此" class="headerlink" title="2、页面路径访问问题(在页面请求中访问servlet也如此)"></a>2、<strong>页面路径访问问题</strong>(在页面请求中访问servlet也如此)</h4><ul>
<li><p>若设置了路径项目名称</p>
<ul>
<li>如果请求路径以   <code>/</code>  开头的，则代表为当前服务器路径即 <a href="http://localhost:8081/,。需要在后面加上项目名称">http://localhost:8081/,。需要在后面加上项目名称</a> <code>/ servlet_test</code><ul>
<li>即访问的规则 <code>&lt;a href=&quot;/servlet_test/page/error.html&quot;&gt;错误页面&lt;/a&gt;</code></li>
</ul>
</li>
<li>如果请求路径没有以 <code>/</code>  开头，那么可以不加项目名称<ul>
<li><code>&lt;a href=&quot;page/error.html&quot;&gt;错误页面&lt;/a&gt;</code></li>
</ul>
</li>
</ul>
</li>
<li><p>若没有设置项目路径名称，则请求加不加  <code>/</code> 都无所谓</p>
</li>
</ul>
<h4 id="3、Servlet中的路径问题"><a href="#3、Servlet中的路径问题" class="headerlink" title="3、Servlet中的路径问题"></a>3、<strong>Servlet中的路径问题</strong></h4><ul>
<li><p>重定向路径</p>
<ul>
<li><p>因为重定向是请求路径交给浏览器去访问，所以在Servlet中使用重定向时加 <code>/</code> 也代表当前服务器路径即 <a href="http://localhost:8081/">http://localhost:8081/</a>, 需要加项目名 。<strong>用法和在页面访问路径一致</strong></p>
</li>
<li><pre><code class="java">response.sendRedirect(<span class="string">"/servlet_test/success.html"</span>);
&lt;!--￼<span class="number">13</span>--&gt;

- ```java
  <span class="comment">//或者</span>
  req.getRequestDispatcher(<span class="string">"success.html"</span>).forward(req, resp);
  &lt;!--￼<span class="number">14</span>--&gt;</code></pre>
</li>
<li><p>使用<code>HttpServletRequest</code>中的<code>getContextPath</code>方法获取项目名称 </p>
<ul>
<li><pre><code class="java">        <span class="comment">//  /servlet_test</span>
String contextPath1 = req.getContextPath();
&lt;!--￼<span class="number">15</span>--&gt;</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li><p>打印到页面：使用<strong>out</strong>对象</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">   <span class="comment">//在页面打印 hello</span></span><br><span class="line">    out.println(<span class="string">"hello"</span>);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2、jsp表达式，在页面输出内容"><a href="#2、jsp表达式，在页面输出内容" class="headerlink" title="2、jsp表达式，在页面输出内容"></a>2、jsp表达式，在页面输出内容</h4><p>在jsp中声明的jsp表达式会被加载到service中的<code>write()</code>流方法中当做参数输出</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--会在头部导入指定包--&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.util.Date"</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--会在页面输出日期--&gt;</span><br><span class="line">&lt;%=<span class="keyword">new</span> Date()%&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3、声明成员-少用"><a href="#3、声明成员-少用" class="headerlink" title="3、声明成员(少用)"></a>3、声明成员(少用)</h4><p>在jsp中以<code>&lt;%!   %&gt;</code> 中声明的代码相当于声明在 Servlet的service方法外面。当做成员参数或成员方法。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%!<span class="keyword">private</span> String name=<span class="string">"张三"</span>;%&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--在页面输出 <span class="string">'张三'</span>--&gt;</span><br><span class="line">&lt;%=name%&gt;</span><br></pre></td></tr></table></figure>

<h4 id="4、jsp注释"><a href="#4、jsp注释" class="headerlink" title="4、jsp注释"></a>4、jsp注释</h4><p><code>&lt;%--   --%&gt;</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%-- 我是注释 --%&gt;</span><br></pre></td></tr></table></figure>

<h4 id="5、jsp指令"><a href="#5、jsp指令" class="headerlink" title="5、jsp指令"></a>5、jsp指令</h4><p><code>&lt;%@ 指令名 属性名=属性值 %&gt;</code></p>
<h5 id="1-page指令"><a href="#1-page指令" class="headerlink" title="1)page指令"></a>1)page指令</h5><p>定义页面是如何解析</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.util.Date"</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br></pre></td></tr></table></figure>

<h5 id="2-include指令"><a href="#2-include指令" class="headerlink" title="2)include指令"></a>2)include指令</h5><p>静态包含。要包含的文件不需要翻译和编译的。静态包含的内容一般不动</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%<span class="meta">@include</span> file=<span class="string">"register.html"</span>%&gt;</span><br></pre></td></tr></table></figure>

<h5 id="3-taglib指令"><a href="#3-taglib指令" class="headerlink" title="3)taglib指令"></a>3)taglib指令</h5><p>在页面引入标签库</p>
<p><code>&lt;%@ taglib 属性名=属性值 %&gt;</code></p>
<h5 id="4-jsp指令"><a href="#4-jsp指令" class="headerlink" title="4)jsp指令"></a>4)jsp指令</h5><p><code>&lt;jsp:指令名 属性名=属性值&gt;</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--动态包含 需要翻译和编译，常用于经常变动的页面。--&gt; </span><br><span class="line">&lt;jsp:include page="register.jsp"&gt;&lt;/jsp:include&gt;</span><br><span class="line">&lt;!--请求转发到指定页面--&gt;</span><br><span class="line">&lt;jsp:forward page="register.jsp"&gt;&lt;/jsp:forward&gt;</span><br><span class="line">&lt;!--请求并指定参数--&gt;</span><br><span class="line">&lt;jsp:forward page=<span class="string">"register.jsp"</span>&gt;</span><br><span class="line">    &lt;jsp:param name=<span class="string">"username"</span> value=<span class="string">"张三"</span>/&gt;</span><br><span class="line">&lt;/jsp:forward&gt;</span><br></pre></td></tr></table></figure>

<h4 id="6、jsp九大隐含对象"><a href="#6、jsp九大隐含对象" class="headerlink" title="6、jsp九大隐含对象"></a>6、jsp九大隐含对象</h4><p>可以在jsp中直接使用</p>
<h5 id="1-隐含对象"><a href="#1-隐含对象" class="headerlink" title="1)隐含对象"></a>1)隐含对象</h5><ul>
<li><p><strong>Throwable</strong> exception=null    <code>代表捕获异常对象</code></p>
</li>
<li><p><strong>ServletConfig</strong>  config=null    <code>代表Servlet配置信息</code></p>
<ul>
<li>获得当前jsp对应servlet的详细信息</li>
<li>获取servlet名称 <code>config.getServletName();</code></li>
</ul>
</li>
<li><p><strong>JspWriter</strong>  out=null        <code>代表在页面输出数据的out对象</code></p>
<ul>
<li><code>out.print(&quot;你好&quot;);</code></li>
</ul>
</li>
<li><p><strong>Object</strong> page=this;       <code>代表当前jsp</code></p>
<ul>
<li><code>主要使用this</code>, page仅代表Object</li>
</ul>
</li>
<li><p>*<em>HttpServletResponse *</em>response  <code>代表当前的响应对象</code></p>
<ul>
<li>向页面输出内容 <code>response.getWriter().write(&quot;hello&quot;);</code></li>
</ul>
</li>
</ul>
<h5 id="2-四大域对象"><a href="#2-四大域对象" class="headerlink" title="2)四大域对象"></a>2)四大域对象</h5><p>域对象用来在其他资源共享数据。都可以通过<code>setAttribute(K,V)</code>的形式设置数据。通过<code>getAttribute(K)</code>的形式拿到数据</p>
<ul>
<li><p><strong>PageContext</strong>   pageContext=null  <code>代表当前页面对象</code></p>
<ul>
<li><p>获取所有的其他的隐含对象</p>
<ul>
<li><pre><code class="java">ServletRequest request1 = pageContext.getRequest();
Object page1 = pageContext.getPage();
&lt;!--￼<span class="number">23</span>--&gt;</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>HttpSession</strong> session=null     <code>代表会话对象</code></p>
</li>
<li><p>同一次会话共享数据， 浏览单打开–开始会话。 浏览器关闭–结束会话。使用不同web应用(Chrom,IE,Egde),就是不同的会话</p>
</li>
<li><p><strong>HttpServletRequest</strong>  request<code>代表当前封装的请求对象</code></p>
</li>
<li><p>在同一个请求对象中共享数据，只要是同一次请求，就可以共享数据。转发也可以共享数据</p>
</li>
<li><p><strong>ServletContent</strong>  application =null    <code>代表整个web应用</code> </p>
<ul>
<li>application 代表当前web应用。只要在同一个web应用都可以共享数据。web应用只要不卸载都可以访问</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>域对象</th>
<th>作用范围</th>
<th>起始时间</th>
<th>结束时间</th>
</tr>
</thead>
<tbody><tr>
<td>pageContext</td>
<td>当前jsp页面</td>
<td>页面加载</td>
<td>离开页面</td>
</tr>
<tr>
<td>request</td>
<td>同一个请求</td>
<td>收到请求</td>
<td>响应</td>
</tr>
<tr>
<td>session</td>
<td>同一个会话</td>
<td>开始会话</td>
<td>结婚会话</td>
</tr>
<tr>
<td>application</td>
<td>当前web应用</td>
<td>web应用加载</td>
<td>web应用卸载</td>
</tr>
</tbody></table>
<h4 id="7、EL表达式"><a href="#7、EL表达式" class="headerlink" title="7、EL表达式"></a>7、EL表达式</h4><p>EL表达式都是通过属性的get方法获取的。而不是属性。所以命名要以按照javabean的规范编写</p>
<p>EL表达式可以存在html标签中的属性中。或者任意hmtl标签内</p>
<p><strong>1)获取页面显示域中的属性值<code>${属性名}</code></strong></p>
<p><strong>2)要获取某个属性的值，直接<code>${属性名.属性}</code></strong></p>
<p><strong>3)若el表达式中有多个属性名相同则会从四个域从小到大寻找，找到即停止</strong></p>
<p><strong>4)当有多个属性名相同时，则我们使用：</strong></p>
<p>只能取出通过<code>setAttribute()</code>设置的值</p>
<ul>
<li><p>pageContext域中的数据使用pageScope(封装了pageContext中的所有的属性并封装为map)获取属性 <code>${pageScope.属性}</code></p>
</li>
<li><p>request域中的数据使用requestScope(封装了requestScope中的所有的属性并封装为map)获取属性 <code>${requestScope.属性}</code></p>
</li>
<li><p>session域中的数据使用sessionScope(封装了sessionScope中的所有的属性并封装为map)获取属性 <code>${sessionScope.属性}</code></p>
</li>
<li><p>application域中的数据使用applicationScope(封装了applicationScope中的所有的属性并封装为map)获取属性 <code>${applicationScope.属性}</code></p>
</li>
</ul>
<p><strong>5)el表达式可以取出指定的11隐含对象中的值，自己在<code>&lt;%  %&gt;</code>定义的不能够取出。</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    String s = <span class="string">"jj"</span>;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;!--不能够取出--&gt;    </span><br><span class="line">el字符串s的值为: $&#123;s&#125;  &lt;br/&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--能够取出--&gt;    </span><br><span class="line">字符串s的值为: &lt;%=s%&gt; &lt;br/&gt;</span><br></pre></td></tr></table></figure>

<p><strong>6)当我们的属性名取出的名称出现歧义时我们可以使用<code>[&#39;属性&#39;]</code>的方式取出</strong></p>
<p>可以通过<code>${pageScope[&#39;属性名&#39;][&#39;属性&#39;]}</code> 或者<code>${pageScope[&#39;属性名&#39;]}</code></p>
<p><strong>7)使用el表达式中的的pageContext获取其他隐含对象，若要获取隐含对象中的其他属性，使用 <code>.</code>即可</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;pageContext.request.getAttribute(<span class="string">"user"</span>)&#125;</span><br></pre></td></tr></table></figure>

<p><strong>8)el获取其他隐含对象的值</strong></p>
<ul>
<li><strong>param</strong> 保存的请求参数是 key – value (value只有一个) <ul>
<li>${param.username}</li>
</ul>
</li>
<li><strong>paramsValues</strong> 保存的请求参数是 key –value (value有多个)<ul>
<li>${paramValues..username}</li>
</ul>
</li>
<li><strong>cookie</strong> 保存cookie信息 <ul>
<li><code>${cookie.键.value}</code>  获取指定cookie键的value</li>
</ul>
</li>
</ul>
<p><strong>9)el表达式运算</strong></p>
<p>empty 判断是否为空，为空则为true,否则会false</p>
<p><code>${empty &quot;你好&quot;}</code></p>
<p>也可以在el表达式中写其他表达式的元素，三门运算符等</p>
<p><strong>10)获取请求的上下文路径</strong></p>
<p><code>${pageContext.request.contextPath}</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"org.lc.entity.User"</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    User user = <span class="keyword">new</span> User(<span class="number">1</span>, <span class="string">"admin"</span>, <span class="string">"123456"</span>);</span><br><span class="line">    String s = <span class="string">"jj"</span>;</span><br><span class="line">%&gt;</span><br><span class="line">el字符串s的值为: $&#123;s&#125;  &lt;br/&gt;</span><br><span class="line">字符串s的值为: &lt;%=s%&gt; &lt;br/&gt;</span><br><span class="line">   pageContext:&lt;%pageContext.setAttribute(<span class="string">"pageContextAttr"</span>, <span class="string">"pageContextValue"</span>);%&gt;&lt;br/&gt;</span><br><span class="line">   user:&lt;%pageContext.setAttribute(<span class="string">"user"</span>, user);%&gt;&lt;br/&gt;</span><br><span class="line">   request:&lt;%request.setAttribute(<span class="string">"user"</span>, <span class="string">"requestValue"</span>);%&gt;&lt;br/&gt;</span><br><span class="line">   session:&lt;%session.setAttribute(<span class="string">"user"</span>, <span class="string">"sessionValue"</span>);%&gt;&lt;br/&gt;</span><br><span class="line">   application:&lt;%application.setAttribute(<span class="string">"user"</span>, <span class="string">"applicationValue"</span>);%&gt;&lt;br/&gt;</span><br><span class="line">   &lt;hr/&gt;</span><br><span class="line">&lt;%--   以前获取共享数据的方式--%&gt;</span><br><span class="line">&lt;%--   pageContext:&lt;%=pageContext.getAttribute(<span class="string">"pageContextAttr"</span>)%&gt;&lt;br/&gt;--%&gt;</span><br><span class="line">&lt;%--   现在使用el表达式--%&gt;</span><br><span class="line">&lt;%--通过$&#123;属性值&#125;--%&gt;</span><br><span class="line">   pageContext:$&#123;pageContextAttr&#125;&lt;br/&gt;</span><br><span class="line">&lt;%--直接获取属性对应的对象值--%&gt;</span><br><span class="line">   user:$&#123;user&#125;&lt;br/&gt;</span><br><span class="line">&lt;%--获取对象的属性--%&gt;</span><br><span class="line">   user:$&#123;user.password&#125;&lt;br/&gt;</span><br><span class="line">   user:$&#123;pageScope.user.username&#125;&lt;br/&gt;</span><br><span class="line">   request:$&#123;requestScope.user&#125;&lt;br/&gt;</span><br><span class="line">   session:$&#123;sessionScope.user&#125;&lt;br/&gt;</span><br><span class="line">   application:$&#123;applicationScope.user&#125;&lt;br/&gt;</span><br><span class="line">$&#123;pageContext.request.getAttribute(<span class="string">"user"</span>)&#125;</span><br><span class="line">$&#123;pageContext.request.contextPath&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="七、Cookie"><a href="#七、Cookie" class="headerlink" title="七、Cookie"></a>七、Cookie</h3><p>HTTP是无状态协议</p>
<ul>
<li>无状态：服务器无法分辨每次请求来自谁</li>
</ul>
<p>所以使用cookie是让浏览器去保存一份数据，以后每次访问的时候带上相应的数据。Cookie是服务器发给浏览器保存的</p>
<h4 id="1、创建cookie"><a href="#1、创建cookie" class="headerlink" title="1、创建cookie"></a>1、创建cookie</h4><p>cookie由我们的服务器发送给浏览器创建并发送给浏览器设置保存，每次请求时都会携带此cookie。</p>
<blockquote>
<p>在servlet中创建cookie</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">create</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//可创建多个cookie</span></span><br><span class="line">    <span class="comment">//创建cookie  键 - 值</span></span><br><span class="line">    Cookie cookie=<span class="keyword">new</span> Cookie(<span class="string">"username"</span>,<span class="string">"louchen"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//把cookie发送给浏览器</span></span><br><span class="line">    response.addCookie(cookie);</span><br><span class="line"></span><br><span class="line">    response.getWriter().write(<span class="string">"cookie发给你了..."</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>我们请求创建cookie后，发现在响应头中有Set-Cookie信息，则为Cookie信息</p>
<img src="http://img.louchen.top/2020/07/20200705231631.png" style="zoom: 80%;" />



<img src="http://img.louchen.top/2020/07/20200705231808.png"  />

<p>我们发现保存在浏览器的Cookie中，发现其过期时间Expire/Max-Age  为session，即cookie为一次会话的时间。</p>
<p>即 <em>只要不关闭当前浏览器都是当前会话。若打开其他浏览器或关闭此浏览器则cookie失效。</em></p>
<p>当我们每次进行其他任何请求时，都会携带此cookie。如下请求头：</p>
<img src="http://img.louchen.top/2020/07/20200705232229.png" />

<h4 id="2、获取cookie"><a href="#2、获取cookie" class="headerlink" title="2、获取cookie"></a>2、获取cookie</h4><blockquote>
<p>servlet获取cookie</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//cookie可能有多个</span></span><br><span class="line">        Cookie[] cookies = request.getCookies();</span><br><span class="line">        PrintWriter writer = response.getWriter();</span><br><span class="line">        <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">            writer.write(<span class="string">"cookie键:"</span>+cookie.getName()+<span class="string">"-值:"</span>+cookie.getValue()+<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        writer.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="3、删除cookie"><a href="#3、删除cookie" class="headerlink" title="3、删除cookie"></a>3、删除cookie</h4><ul>
<li><p>cookie默认的生命周期为session，即当前会话(浏览器一直不关则一直有效)</p>
</li>
<li><p>修改cookie的默认存活时间</p>
<ul>
<li>cooke.setMaxAge(0)  参数为秒<ul>
<li>为负数时，浏览器根本不会存储此cookie。 <strong>注意：不一定有效</strong>，根据不同浏览器的规则来实现</li>
<li>为0时，删除此cookie</li>
<li>&gt; 0 时, 例如：setMaxAge(3600) ,则过期时间为3600秒后</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>servlet实现删除</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    Cookie[] cookies = request.getCookies();</span><br><span class="line">    PrintWriter writer = response.getWriter();</span><br><span class="line">    Cookie cookieR=<span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cookie.getName().equals(<span class="string">"username"</span>)) &#123;</span><br><span class="line">            <span class="comment">//设置过期时间为0，则删除</span></span><br><span class="line">            cookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">            cookieR=cookie;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//响应此修改后的cookie给浏览器</span></span><br><span class="line">    response.addCookie(cookieR);</span><br><span class="line">    writer.write(<span class="string">"已删除cookie..."</span>);</span><br><span class="line">    writer.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>我们发现响应头中的Set-Cookie的Expires已经设置为我们最大生成时间0秒</p>
<img src="http://img.louchen.top/2020/07/20200706000202.png" style="zoom: 80%;" />

<p>并且发现浏览器中存储的Cookie也已经删除。</p>
<h4 id="4、设置cookie有效时间"><a href="#4、设置cookie有效时间" class="headerlink" title="4、设置cookie有效时间"></a>4、设置cookie有效时间</h4><blockquote>
<p>servlet实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">livetime</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    Cookie[] cookies = request.getCookies();</span><br><span class="line">    PrintWriter writer = response.getWriter();</span><br><span class="line">    Cookie cookieR=<span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cookie.getName().equals(<span class="string">"username"</span>)) &#123;</span><br><span class="line">            <span class="comment">//设置请求的最大生命时间为3600s</span></span><br><span class="line">            cookie.setMaxAge(<span class="number">3600</span>);</span><br><span class="line">            cookieR=cookie;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//响应此修改后的cookie给浏览器</span></span><br><span class="line">    response.addCookie(cookieR);</span><br><span class="line">    writer.write(<span class="string">"已持久化cookie 3600秒..."</span>);</span><br><span class="line">    writer.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>我们发现在请求头中的Set-Cookie过期时间Expiress已经向后延期了3600秒</p>
<img src="http://img.louchen.top/2020/07/20200706000814.png" style="zoom: 80%;" />



<img src="http://img.louchen.top/2020/07/20200706001016.png"  />

<p>5、设置cookie请求路径</p>
<p>默认我们的每一次请求都会携带cookie。但是我们的请求往往不是每一次都需要携带cookie,所以我们可以设置cookie的请求路径</p>
<blockquote>
<p>servlet设置cookie请求路径</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">cookiePath</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//设置cookie</span></span><br><span class="line">    Cookie cookie=<span class="keyword">new</span> Cookie(<span class="string">"cookieppp"</span>,<span class="string">"lc"</span>);</span><br><span class="line">    <span class="comment">//设置cookie访问的路径 即只有携带该路径 此cookie才会被存储</span></span><br><span class="line">    <span class="comment">// /代表服务器根路径 http://localhost:8080/</span></span><br><span class="line">    <span class="comment">//所以我们每次访问必须以  http://localhost:8080/hello/** 开始</span></span><br><span class="line">    cookie.setPath(<span class="string">"/hello"</span>);</span><br><span class="line">    response.addCookie(cookie);</span><br><span class="line">    response.getWriter().write(<span class="string">"cookie路径已被修改"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>我们设置后浏览器发送给服务器一个cookie，但是我们此时并没有访问cookie路径，所以此时cooke并不会存储。</p>
<img src="http://img.louchen.top/2020/07/20200706095350.png" style="zoom:80%;" />

<p>当我们请求以服务器的路径开始请求时 即 <a href="http://localhost:8080/hello">http://localhost:8080/hello</a>   我们的浏览器才会存储此cookie,并且携带此cookie进行请求。</p>
<p><img src="http://img.louchen.top/2020/07/20200706095543.png" alt=""></p>
<img src="http://img.louchen.top/2020/07/20200706095745.png" style="zoom:80%;" />

<p>但我们的服务器请求其他非cookie路径时，请求不会携带cookie,浏览器也不会存储其cookie</p>
<h4 id="5、修改cookie"><a href="#5、修改cookie" class="headerlink" title="5、修改cookie"></a>5、修改cookie</h4><p>当我们要修改cookie的value值或者cookie的生存周期，我们可以通过遍历的方式通过cookie名称拿到此cookie，这样做可以，但是很麻烦。我们可以直接通过新建一个cookie来覆盖掉之前的cookie即可。</p>
<ul>
<li>默认cookie的value值不能为中文，若为中文，则需要将中文编码。读取时将值进行解码<ul>
<li>编码  <code>String value = URLEncoder.encode(&quot;张三&quot;, &quot;utf-8&quot;);</code> <code>%E5%BC%A0%E4%B8%89</code></li>
<li>解码  <code>String decode = URLDecoder.decode(&quot;%E5%BC%A0%E4%B8%89&quot;, &quot;utf-8&quot;);</code>  <code>张三</code></li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">updateCookie</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//默认cookie的value值不能为中文，若为中文，则需要将中文编码。读取时将值进行解码</span></span><br><span class="line">    String value = URLEncoder.encode(<span class="string">"张三"</span>, <span class="string">"utf-8"</span>);</span><br><span class="line">    Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">"username"</span>, value);</span><br><span class="line">    cookie.setMaxAge(<span class="number">300</span>);</span><br><span class="line">    response.addCookie(cookie);</span><br><span class="line">    response.getWriter().write(<span class="string">"cookie值已被修改"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="八、Session"><a href="#八、Session" class="headerlink" title="八、Session"></a>八、Session</h3><p>服务器保存的技术，域对象(在整个会话期间保存的数据在任意资源都可以取到)</p>
<p>作用：域对象共享数据。</p>
<p>session就是当前会话对象，它可以共享当前会话的数据。服务器会为每个会话(重新开启浏览器，或者打开不同的浏览器)创建独立的session。只会为每个会话创建一个session,第一次获取的session是新创建的，以后获取的都是之前创建的。</p>
<ul>
<li><p>当我们的请求第一次使用session时，若session没有被创建，那么服务器会创建一个session，并生成一个sessionId发送个浏览器，浏览器在cookie中保存此sessionid。每次请求时并携带此sessionId.</p>
<ul>
<li><p>当我们的服务器没有session时，第一次请求服务器会为我们的浏览器再响应头中传入一个JSESSIONID保存在浏览器的cookie中.发现session的<strong>默认生命周期即为一次会话</strong></p>
</li>
<li><img src="http://img.louchen.top/2020/07/20200706153224.png" style="zoom:80%;" /></li>
<li><p><img src="http://img.louchen.top/2020/07/20200706153522.png" alt=""></p>
</li>
</ul>
</li>
</ul>
<h4 id="1、创建session对象并获取session-id"><a href="#1、创建session对象并获取session-id" class="headerlink" title="1、创建session对象并获取session id"></a>1、创建session对象并获取session id</h4><blockquote>
<p>在servlet中实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//从请求中获取session</span></span><br><span class="line">    HttpSession session = request.getSession();</span><br><span class="line">    <span class="comment">//判断该session是否为新创建的</span></span><br><span class="line">    <span class="keyword">boolean</span> sessionNew = session.isNew();</span><br><span class="line">    <span class="comment">//获取session id</span></span><br><span class="line">    String id = session.getId();</span><br><span class="line">    response.getWriter().write(<span class="string">"已经获取到session对象...是否为新创建的:"</span>+sessionNew);</span><br><span class="line">    response.getWriter().write(<span class="string">"&lt;br/&gt;session的id为:"</span>+id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="2、设置sessiond的属性并获取session的属性值"><a href="#2、设置sessiond的属性并获取session的属性值" class="headerlink" title="2、设置sessiond的属性并获取session的属性值"></a>2、设置sessiond的属性并获取session的属性值</h4><blockquote>
<p>servlet中设置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//获取session</span></span><br><span class="line">    HttpSession session = req.getSession();</span><br><span class="line">    <span class="comment">//给session设置属性</span></span><br><span class="line">    session.setAttribute(<span class="string">"user"</span>, <span class="string">"louchen"</span>);</span><br><span class="line">    resp.getWriter().write(<span class="string">"已经向session设置属性user..."</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>servlet 获取</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">getValue</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    HttpSession session = request.getSession();</span><br><span class="line">    <span class="comment">//获取sessions属性值</span></span><br><span class="line">    String user = (String) session.getAttribute(<span class="string">"user"</span>);</span><br><span class="line">    response.getWriter().write(<span class="string">"session中属性user的值为："</span>+user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="3、获取session的有效时间"><a href="#3、获取session的有效时间" class="headerlink" title="3、获取session的有效时间"></a>3、获取session的有效时间</h4><blockquote>
<p>servlet中获取</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">getTime</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    HttpSession session = request.getSession();</span><br><span class="line">    <span class="comment">//以秒为单位  默认有效是时间为30分钟</span></span><br><span class="line">    <span class="keyword">int</span> maxInactiveInterval = session.getMaxInactiveInterval();</span><br><span class="line">    response.getWriter().write(<span class="string">"session的有效时间为："</span>+maxInactiveInterval);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>为啥是30分钟，我们的浏览器再次关闭时，再打开时为啥还是失效？。</p>
<p>因为我们的sessionid是保存在cookie中，当我们关闭浏览器时，cookie即失效。再一次请求时cookie为空，所以session失效</p>
<ul>
<li><p>我们可以在tomcat的配置中<code>\apache-tomcat-7.0.40\conf\web.xml</code>查看session的有效时间 .<strong>单位为分钟</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>30<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="4、设置session有效时间"><a href="#4、设置session有效时间" class="headerlink" title="4、设置session有效时间"></a>4、设置session有效时间</h4><p><strong>1)在tomcat中的web.xml中配置。</strong>  或者在项目下的web.xml中配置  <strong>单位为分钟</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>30<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>2)延期失效</strong>  单位为秒</p>
<blockquote>
<p>servlet设置</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">updateTime</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    HttpSession session = request.getSession();</span><br><span class="line">    <span class="keyword">int</span> i=<span class="number">3</span>;</span><br><span class="line">    <span class="comment">//单位秒  距离最后一次使用session开始计时 </span></span><br><span class="line">    <span class="comment">//为负数时：永不过期</span></span><br><span class="line">    <span class="comment">//为正数时：过期时间单位为秒</span></span><br><span class="line">    session.setMaxInactiveInterval(i);</span><br><span class="line">    response.getWriter().write(<span class="string">"已设置session的有效期，时间为:"</span>+i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3）立即失效</strong></p>
<blockquote>
<p>servlet设置</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">invalid</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    HttpSession session = request.getSession();</span><br><span class="line">    <span class="comment">//session立即失效。不会延期</span></span><br><span class="line">    session.invalidate();</span><br><span class="line">    response.getWriter().write(<span class="string">"session已失效..."</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5、设置session持久化"><a href="#5、设置session持久化" class="headerlink" title="5、设置session持久化"></a>5、设置session持久化</h4><p>将sessionid存在cookie中并设置过期时间。即使关闭浏览器也不会失效。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">persistence</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    HttpSession session = request.getSession();</span><br><span class="line">    String id = session.getId();</span><br><span class="line">    <span class="comment">//把session手动存在cookie中</span></span><br><span class="line">    Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">"JSESSIONID"</span>, id);</span><br><span class="line">    <span class="comment">//设置过期时间 24小时</span></span><br><span class="line">    cookie.setMaxAge(<span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>);</span><br><span class="line">    response.addCookie(cookie);</span><br><span class="line">    response.getWriter().write(<span class="string">"session已持久化"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="九、禁用cookie重写url"><a href="#九、禁用cookie重写url" class="headerlink" title="九、禁用cookie重写url"></a>九、禁用cookie重写url</h3><p>​        我们每次请求浏览器时，当服务器没有创建session，服务器会创建session对象并向我们的浏览器发送一份sessionid存储在cookie中，若我们禁用浏览器的cookie,那么浏览器并不会存储此sessionid，导致我们在请求服务器时服务器都会创建一份新的sessionid。,即从服务器无法获取session中设置的属性值</p>
<p><strong>解决方法：</strong> 在请求指定session对象中的值时在地址栏中传入sessionid即可</p>
<blockquote>
<p>bancookie.jsp</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">//设置session属性</span></span><br><span class="line">    session.setAttribute(<span class="string">"sessionAttr"</span>, <span class="string">"sessionValue"</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;a href="sessiontest.jsp"&gt;去其他页面&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>sessiontest.jsp</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;!--获取session属性值--&gt;</span><br><span class="line">session中的值：$&#123;sessionAttr&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>请求地址:·<code>http://localhost:8080/sessiontest.jsp;jsessionid=9C592B93BFF112050536DDD98BFD6D7B</code></p>
<p><strong>jsessionid=9C592B93BFF112050536DDD98BFD6D7B</strong>  该sessionid为在页面<code>bancookie.jsp</code> 页面上获取的sessionid</p>
<ul>
<li>使用<strong>response</strong>中的<code>encodeRedirectURL()</code>方法优化其请求路径。自动判断，如果禁用cookie则帮我们携带上session否则不会携带<ul>
<li><code>&lt;a href=&quot;&lt;%=response.encodeRedirectURL(&quot;sessiontest.jsp&quot;)%&gt;&quot;&gt;去其他页面&lt;/a&gt;</code></li>
</ul>
</li>
</ul>
<h3 id="十、session的钝化和活化"><a href="#十、session的钝化和活化" class="headerlink" title="十、session的钝化和活化"></a>十、session的钝化和活化</h3><p>现象：服务器关闭重新启动，只要浏览器没关，还是能获取到session的内容</p>
<p>钝化：服务器关闭后，会将session(序列化)保存到硬盘中，可以在项目中查看生成SESSION.ser的文件</p>
<p>活化：服务器再次启动时，把之前序列化好的文件加载进来。就会再次加载之前保存的SESSION.ser文件包含了session域中的内容</p>
<p>session域中的对象要能同session一起钝化到磁盘中必须实现serializable接口</p>
<h3 id="十一、Filter-过滤器"><a href="#十一、Filter-过滤器" class="headerlink" title="十一、Filter 过滤器"></a>十一、Filter 过滤器</h3><p><strong>Filter是用来执行过滤任务的一个接口对象</strong>，作用于：</p>
<ul>
<li><p>请求一个资源(动态资源Servlet,JSP,静态资源)</p>
</li>
<li><p>来自一个资源的响应</p>
</li>
<li><p>两个都可以。既可以过滤请求，也可以过滤响应</p>
</li>
</ul>
<p><strong>Filter过滤请求和响应：</strong></p>
<ul>
<li>filter可以拦截请求(request),可以修改请求头，请求内容等</li>
<li>filter可以拦截来自服务端的响应(response),可以修改响应头和响应内容</li>
<li>放行请求</li>
</ul>
<h4 id="1、过滤器执行流程"><a href="#1、过滤器执行流程" class="headerlink" title="1、过滤器执行流程"></a>1、过滤器执行流程</h4><p><strong>实现Filter接口：</strong></p>
<p>只有请求地址为  <code>http://localhost:8080/filtertest.jsp</code>的 请求才能被该过滤器所过滤</p>
<p>请求参数携带 <code>key</code>  的才能被放行执行</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//实现Filter接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RoomFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    销毁的方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    执行过滤的具体方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest req, ServletResponse resp, FilterChain chain)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"进入过滤器..."</span>);</span><br><span class="line">        String key = req.getParameter(<span class="string">"key"</span>);</span><br><span class="line">        <span class="keyword">if</span> (key == <span class="keyword">null</span> || key.equals(<span class="string">""</span>)) &#123;</span><br><span class="line">            <span class="comment">//说明没拿到key 不放行  拦截所有页面内容。只会输出响应的值</span></span><br><span class="line">            resp.getWriter().write(<span class="string">"stop in...."</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"放行之前..."</span>);</span><br><span class="line">            <span class="comment">//放行该请求</span></span><br><span class="line">            chain.doFilter(req, resp);</span><br><span class="line">            <span class="comment">//继续执行后面代码</span></span><br><span class="line">            System.out.println(<span class="string">"放行之后..."</span>);</span><br><span class="line">            <span class="comment">//我是经过过滤器的响应  响应对象做修改操作</span></span><br><span class="line">            resp.getWriter().write(<span class="string">"我是给页面的响应..."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    初始化方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>配置Filer请求路径</strong></p>
<p>和servlet配置类似</p>
<p><code>&lt;url-pattern&gt;/*&lt;/url-pattern&gt;</code>  过滤所有请求</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置filter路径--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置filer名称--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>RoomFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- filer具体类路径--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.lc.controller.RoomFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 配置该filter过滤的路径--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 指定哪个filter--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>RoomFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 过滤的路径  只要是以 '项目路径/filtertest.jsp' 的请求即被过滤  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/filtertest.jsp<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="http://img.louchen.top/2020/07/20200707092616.png" style="zoom:80%;" />

<h4 id="2、过滤器生命周期"><a href="#2、过滤器生命周期" class="headerlink" title="2、过滤器生命周期"></a>2、过滤器生命周期</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//实现Filter接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RoomFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    销毁的方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    执行过滤的具体方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest req, ServletResponse resp, FilterChain chain)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    初始化方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>1)初始化</strong></p>
<ul>
<li>服务器启动的时候即初始化。创建filter对象调用<code>init()</code>方法 。该过滤器为单例多线程，即只创建一个单例对象</li>
</ul>
<p><strong>2)每次拦截请求都执行 <code>doFilter()</code>方法</strong></p>
<p><strong>3)服务器停止执行<code>destroy()</code>方法销毁过滤器</strong></p>
<h4 id="3、过滤器拦截路径规则"><a href="#3、过滤器拦截路径规则" class="headerlink" title="3、过滤器拦截路径规则"></a>3、过滤器拦截路径规则</h4><h5 id="1-精确匹配"><a href="#1-精确匹配" class="headerlink" title="1)精确匹配"></a>1)精确匹配</h5><ul>
<li><p>写要拦截的资源的详细资源路径  </p>
<ul>
<li><p>只拦截某一个具体的指定资源。 <code>/</code> 代表 <strong>项目路径</strong>(若配置项目名)：<code>http://localhost:8080/项目名/</code></p>
</li>
<li><p><code>&lt;url-pattern&gt;/filtertest.jsp&lt;/url-pattern&gt;</code>   只拦截 <code>/filtertest.jsp</code>  的请求路径</p>
</li>
<li><p><code>&lt;url-pattern&gt;/page/filtertest.jsp&lt;/url-pattern&gt;</code>   只拦截 项目page文件夹下的  <code>/page/filtertest.jsp</code></p>
</li>
</ul>
</li>
</ul>
<h5 id="2-路径匹配"><a href="#2-路径匹配" class="headerlink" title="2)路径匹配"></a>2)路径匹配</h5><ul>
<li>要拦截的请求路径，或者资源路径<ul>
<li><code>&lt;url-pattern&gt;/page/*&lt;/url-pattern&gt;</code>  拦截page开头的所有请求，或者拦截page下的所有资源</li>
<li><code>&lt;url-pattern&gt;/*&lt;/url-pattern&gt;</code>  拦截所有请求和所有资源</li>
</ul>
</li>
</ul>
<h5 id="3-后缀匹"><a href="#3-后缀匹" class="headerlink" title="3)后缀匹"></a>3)后缀匹</h5><ul>
<li><p>*.后缀名</p>
<ul>
<li><code>&lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;</code>  拦截所有请求以 .jsp 结尾的资源</li>
</ul>
</li>
<li><p>若要实现拦截 page文件下的所有以 *.jsp结尾的资源</p>
<ul>
<li><pre><code class="xml">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span>
        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>PatternFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span>
        <span class="comment">&lt;!--先拦截page下的所有请求--&gt;</span>
        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/page/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>
    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span>
<span class="comment"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  通过请求拿到对应的请求路径，然后判断请求是否以指定规则结尾的，是则拦截，否则放行</span><br><span class="line"></span><br><span class="line">  &#96;HttpServletRequest request&#x3D; (HttpServletRequest) req;&#96; 将&#96;ServletRequest&#96;请求强制转为&#96;HttpServletRequest &#96;请求</span><br><span class="line"></span><br><span class="line">  &#96;request.getRequestURI();&#96;  获取请求的URI  不包含项目路径</span><br><span class="line"></span><br><span class="line">  &#96;request.getRequestURL();&#96; 获取请求的URL 包含项目路径</span><br><span class="line"></span><br><span class="line">- &#96;&#96;&#96;java</span><br><span class="line">      @Override</span><br><span class="line">      public void doFilter(ServletRequest req, ServletResponse resp, FilterChain chain) throws ServletException, IOException &#123;</span><br><span class="line">          System.out.println(&quot;执行doFilter...&quot;);</span><br><span class="line">          HttpServletRequest request&#x3D; (HttpServletRequest) req;</span><br><span class="line">          &#x2F;&#x2F;  &#x2F;page&#x2F;index.jsp</span><br><span class="line">          String requestURI &#x3D; request.getRequestURI();</span><br><span class="line">          &#x2F;&#x2F;  http:&#x2F;&#x2F;localhost:8080&#x2F;page&#x2F;success.jsp</span><br><span class="line">          StringBuffer requestURL &#x3D; request.getRequestURL();</span><br><span class="line">          System.out.println(requestURI);</span><br><span class="line">          System.out.println(requestURL);</span><br><span class="line">          if (requestURL.toString().endsWith(&quot;.jsp&quot;)) &#123;</span><br><span class="line">              &#x2F;&#x2F;拦截 以 .jsp结尾的</span><br><span class="line">          &#125;else&#123;</span><br><span class="line">              &#x2F;&#x2F;放行其他的</span><br><span class="line">              chain.doFilter(req, resp);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></span></code></pre>
</li>
</ul>
</li>
<li><p><strong>错误写法:</strong></p>
<ul>
<li><code>&lt;url-pattern&gt;/page/*.jsp&lt;/url-pattern&gt;</code>    ×××</li>
</ul>
</li>
</ul>
<h5 id="4-一次过滤多个拦截规则"><a href="#4-一次过滤多个拦截规则" class="headerlink" title="4)一次过滤多个拦截规则"></a>4)一次过滤多个拦截规则</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>LoginFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--拦截/shop2开头的所有请求--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/shop2/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--拦截/page开头的所有请求--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/page/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="5-拦截指定servlet的所有请求"><a href="#5-拦截指定servlet的所有请求" class="headerlink" title="5)拦截指定servlet的所有请求"></a>5)拦截指定servlet的所有请求</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>PatternFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--servlet的名称--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>UserServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="4、filter响应中文乱码问题"><a href="#4、filter响应中文乱码问题" class="headerlink" title="4、filter响应中文乱码问题"></a>4、filter响应中文乱码问题</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest req, ServletResponse resp, FilterChain chain)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    	<span class="comment">//我们在执行放行方法之前若写入响应数据，则会造成乱码。因为resp中的响应头字符编码的头为空，所以需要手动设置字符编码</span></span><br><span class="line">    	 resp.setContentType(<span class="string">"text/html;charest=utf-8"</span>);</span><br><span class="line">        resp.getWriter().write(<span class="string">"执行过滤器doFilter之前"</span>);</span><br><span class="line">        chain.doFilter(req, resp);</span><br><span class="line">    	<span class="comment">//而执行doFilter方法后，响应头的中的字符编码jsp已经为我们设置，所以后续执行不乱码</span></span><br><span class="line">        resp.getWriter().write(<span class="string">"我是给页面的响应..."</span>);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述response封装完后，从上到下依次渲染数据，在<code>doFilter</code>之前的渲染数据若没有配置字符编码则会乱码，在<code>doFilter</code>之后的数据不会乱码，因为在<code>doFilter</code>中已经对字符完成编码</p>
<h4 id="5、各种ServletConfig-ServletContext-FilterConfig初始化参数"><a href="#5、各种ServletConfig-ServletContext-FilterConfig初始化参数" class="headerlink" title="5、各种ServletConfig,ServletContext,FilterConfig初始化参数"></a>5、各种<code>ServletConfig</code>,<code>ServletContext</code>,<code>FilterConfig</code>初始化参数</h4><h5 id="1-ServletConfig"><a href="#1-ServletConfig" class="headerlink" title="1)ServletConfig"></a>1)<code>ServletConfig</code></h5><p>在该servlet创建的时候调用<code>init()</code>方法  </p>
<ul>
<li>一个servlet对应一个 <code>ServletConfig</code> 存放该servlet的配置信息</li>
</ul>
<p><code>web.xml配置</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>UserServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.lc.controller.UserServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置初始化参数--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--参数名--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>user<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--参数值--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>lc<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">    <span class="comment">//获取初始化参数 </span></span><br><span class="line">    String user = config.getInitParameter(<span class="string">"user"</span>);</span><br><span class="line">    <span class="comment">//lc</span></span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-ServletContext和FilterConfig"><a href="#2-ServletContext和FilterConfig" class="headerlink" title="2)ServletContext和FilterConfig"></a>2)<code>ServletContext</code>和<code>FilterConfig</code></h5><p>服务器启动时即初始filter调用<code>init()</code>方法</p>
<p><code>ServletContext</code>对应整个web应用</p>
<p>通过<code>FilterConfig</code> 或者<code>ServletConfig</code>   获得 <code>ServletContext</code></p>
<ul>
<li>一个filter对应一个<code>FilterConfig</code>   ，存放该filer的配置信息</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- application初始化参数--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>user<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>applicationValue<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 配置filer名称--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>RoomFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- filer具体类路径--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.lc.controller.RoomFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--filter初始化参数--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>user<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>filterValue<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//    初始化方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        <span class="comment">//获取当前application参数  (代表整个web服务器)</span></span><br><span class="line">        ServletContext servletContext = config.getServletContext();</span><br><span class="line">        <span class="comment">//获取application初始化参数</span></span><br><span class="line">        String user = servletContext.getInitParameter(<span class="string">"user"</span>);</span><br><span class="line">        <span class="comment">//applicationValue</span></span><br><span class="line">        System.out.println(user);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取过滤器初始化参数</span></span><br><span class="line">        String user1 = config.getInitParameter(<span class="string">"user"</span>);</span><br><span class="line">        <span class="comment">//filterValue</span></span><br><span class="line">        System.out.println(user1);</span><br><span class="line">        String filterName = config.getFilterName();</span><br><span class="line">        <span class="comment">//该filter的别名</span></span><br><span class="line">        System.out.println(filterName);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="6、过滤器链"><a href="#6、过滤器链" class="headerlink" title="6、过滤器链"></a>6、过滤器链</h4><p>若多个过滤器过滤相同的请求，则会从web.xml中从上到下依次加载过滤器，优先执行先加载的过滤器</p>
<blockquote>
<p> 过滤器AFilter和BFilter依次过滤 a.jsp的页面请求</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>AFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.lc.controller.AFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>AFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/a.jsp<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>BFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.lc.controller.BFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>BFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/a.jsp<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>AFilter</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest req, ServletResponse resp, FilterChain chain)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"顺序 1"</span>);</span><br><span class="line">    <span class="comment">//执行doFilter后，若还有相同请求的过滤器未执行则继续执行其他过滤器</span></span><br><span class="line">    chain.doFilter(req, resp);</span><br><span class="line">    System.out.println(<span class="string">"顺序 2"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>BFilter</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest req, ServletResponse resp, FilterChain chain)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"顺序 3"</span>);</span><br><span class="line">    chain.doFilter(req, resp);</span><br><span class="line">    System.out.println(<span class="string">"顺序 4"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>a.jsp</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    System.out.println(<span class="string">"顺序 a.jsp"</span>);</span><br><span class="line">%&gt;</span><br><span class="line">  &lt;h1&gt;我是a.jsp页面&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>依次打印：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">顺序 <span class="number">1</span></span><br><span class="line">顺序 <span class="number">3</span></span><br><span class="line">顺序 a.jsp</span><br><span class="line">顺序 <span class="number">4</span></span><br><span class="line">顺序 <span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>由上可以过滤器相当于在<strong><em>doFilter中执行递归调用</em></strong>。</p>
<h4 id="7、dispatcher"><a href="#7、dispatcher" class="headerlink" title="7、dispatcher"></a>7、dispatcher</h4><p>告诉服务器都拦截哪些方式到达的资源</p>
<p>FORWARD : 拦截转发过来的，转发到这个地址，会被拦截</p>
<p>INCLUDE：拦截包含的，包含这个地址的会被拦截，拦截动态包含</p>
<p>REQUEST(默认的)：直接请求的，直接请求这个地址会被拦截，post,get请求</p>
<p>ERROR：发送错误，去全局配置一个错误页面会被拦截。不是errorPage指向的页面。指的是全年局的配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>BFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/a.jsp<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--FORWARD,INCLUDE, REQUEST, ERROR--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dispatcher</span>&gt;</span>REQUEST<span class="tag">&lt;/<span class="name">dispatcher</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dispatcher</span>&gt;</span>FORWARD<span class="tag">&lt;/<span class="name">dispatcher</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="十二、JDBC使用步骤"><a href="#十二、JDBC使用步骤" class="headerlink" title="十二、JDBC使用步骤"></a>十二、JDBC使用步骤</h3><p>1、加载驱动</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br></pre></td></tr></table></figure>

<p>2、获得连接</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Connection con=DriverManager.getConnection(<span class="string">"jdbc:mysql://localhost:3306/test"</span>,<span class="string">"root"</span>,<span class="string">"123456"</span>)</span><br></pre></td></tr></table></figure>

<p>3、创建运行对象</p>
<p>4、运行sql</p>
<p>5、处理运行结果</p>
<p>6、释放资源</p>
<h3 id="十三、AJAX"><a href="#十三、AJAX" class="headerlink" title="十三、AJAX"></a>十三、AJAX</h3><h4 id="1、简介"><a href="#1、简介" class="headerlink" title="1、简介"></a>1、简介</h4><p>AJAX = Asynchronous JavaScript and XML（<strong>异步的 JavaScript 和 XML</strong>）。</p>
<p>AJAX 不是新的编程语言，而是一种使用现有标准的新方法。</p>
<p>AJAX 是与服务器交换数据并更新部分网页的艺术，在不重新加载整个页面的情况下。</p>
<h4 id="2、js发送ajax请求"><a href="#2、js发送ajax请求" class="headerlink" title="2、js发送ajax请求"></a>2、js发送ajax请求</h4><ul>
<li><strong>onreadystatechange</strong> 事件 获取响应过程状态信息 </li>
</ul>
<p>当请求被发送到服务器时，我们需要执行一些基于响应的任务。</p>
<p>每当 readyState 改变时，就会触发 onreadystatechange 事件。</p>
<p>readyState 属性存有 XMLHttpRequest 的状态信息。</p>
<p>下面是 XMLHttpRequest 对象的三个重要的属性：</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>onreadystatechange</td>
<td>存储函数（或函数名），每当 readyState 属性改变时，就会调用该函数。</td>
</tr>
<tr>
<td>readyState</td>
<td>存有 XMLHttpRequest 的状态。从 0 到 4 发生变化。<br />0: 请求未初始化<br /> 1: 服务器连接已建立 <br />2: 请求已接收 <br />3: 请求处理中 <br />4: 请求已完成，且响应已就绪</td>
</tr>
<tr>
<td>status</td>
<td>200: “OK”<br />404: 未找到页面</td>
</tr>
</tbody></table>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%--通过ajax请求--%&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="function">function <span class="title">btnAjax</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1、创建xhr对象，用这个对象来向服务器发送请求</span></span><br><span class="line">        let xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2、定义请求发送格式</span></span><br><span class="line">        <span class="comment">//请求类型; 请求地址; 是否异步(默认true)</span></span><br><span class="line">        <span class="comment">//请求地址可以携带参数</span></span><br><span class="line">        xhr.open(<span class="string">"GET"</span>, <span class="string">"ajax?username=zs&amp;pw=123456"</span>, <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3、发送请求</span></span><br><span class="line">        <span class="comment">//若请求有请求体，则将请求体的数据发送(仅用于 POST 请求)</span></span><br><span class="line">        <span class="comment">// xhr.send(body);</span></span><br><span class="line">        xhr.send();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4、获取响应的数据</span></span><br><span class="line">        <span class="comment">//xhr中的属性</span></span><br><span class="line">        <span class="comment">//responseText获得字符串形式的响应数据。</span></span><br><span class="line">        <span class="comment">//responseXML 获得XML形式的响应数据。</span></span><br><span class="line">        <span class="comment">//当请求的处理状态为4 并且 status状态为200时 代表响应处理完成。</span></span><br><span class="line">        xhr.onreadystatechange = function () &#123;</span><br><span class="line">            <span class="keyword">if</span> (!(xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span>)) &#123;</span><br><span class="line">                let v = document.getElementById(<span class="string">"text"</span>);</span><br><span class="line">                v.innerText = xhr.responseText;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;button onclick="btnAjax()"&gt;发送请求&lt;/button&gt;</span><br><span class="line">&lt;div id="text"&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3、解决ajax请求缓存问题-验证码"><a href="#3、解决ajax请求缓存问题-验证码" class="headerlink" title="3、解决ajax请求缓存问题 (验证码)"></a>3、解决ajax请求缓存问题 (验证码)</h4><p>生成一个随机值携带参数一同发送给服务器</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="keyword">get</span>('ajax?username=lc&amp;pw=123'+Math.random(),function (data) &#123; &#125;,<span class="string">"text"</span>);</span><br></pre></td></tr></table></figure>

<h4 id="4、jquery发送-post-get-请求"><a href="#4、jquery发送-post-get-请求" class="headerlink" title="4、jquery发送$.post()/$.get()请求"></a>4、jquery发送$.post()/$.get()请求</h4><ul>
<li><p><code>$.get(URL,data,function(data,status,xhr),dataType)</code>  </p>
<ul>
<li>发送get请求，在url中携带的参数和在data中传入的参数 都会被放到url地址栏中传输</li>
</ul>
</li>
<li><p><code>$.post(URL,data,function(data,status,xhr),dataType)</code></p>
<ul>
<li>发送post请求，在utl中携带的参数还是在url地址上，在data中的参数会被放在请求体中。</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>参数</th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><em>URL</em></td>
<td><strong>必需</strong>。规定您需要请求的 URL。</td>
</tr>
<tr>
<td><em>data</em></td>
<td><strong>可选</strong>。规定连同请求发送到服务器的数据。带key-value的参数</td>
</tr>
<tr>
<td><em>function(data,status,xhr)</em></td>
<td><strong>可选</strong>。规定当请求成功时运行的函数。<br />额外的参数：<br /><em>data</em> - 包含来自请求的结果数据<br /><em>status</em>(<strong>可选</strong>) - 包含请求的状态（”success”、”notmodified”、”error”、”timeout”、”parsererror”）<br /><em>xhr</em>(<strong>可选</strong>) - 包含 XMLHttpRequest 对象</td>
</tr>
<tr>
<td><em>dataType</em></td>
<td><strong>可选</strong>。规定预期的服务器响应的数据类型。<br />“xml” - 一个 XML 文档<br />html” - HTML 作为纯文本<br />“text” - 纯文本字符串<br />“script” - 以 JavaScript 运行响应，并以纯文本返回<br />“json” - 以 JSON 运行响应，并以 JavaScript 对象返回<br />“jsonp” - 使用 JSONP 加载一个 JSON 块，将添加一个 “?callback=?” 到 URL 来规定回调</td>
</tr>
</tbody></table>
<h5 id="1-发送get请求"><a href="#1-发送get请求" class="headerlink" title="1)发送get请求"></a>1)发送get请求</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script src="/webjars/jquery/3.3.1-2/jquery.min.js"&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="function">function <span class="title">jqueryAjax</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        $.get(<span class="string">'ajax?user=zs&amp;pw=123&amp;r='</span>+Math.random(),&#123;<span class="string">"id"</span>:<span class="number">1111</span>,username:<span class="string">"lc"</span>,password:<span class="number">123456</span>&#125;,function (data) &#123;</span><br><span class="line">            let parse = JSON.parse(data);</span><br><span class="line">            $(<span class="string">"#text"</span>).text(parse.username+parse.id);</span><br><span class="line">        &#125;,<span class="string">'text'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;button onclick="jqueryAjax()"&gt;jquery发送get请求&lt;/button&gt;</span><br><span class="line">&lt;div id="text"&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<img src="http://img.louchen.top/2020/07/20200708104915.png" style="zoom:80%;" />

<img src="http://img.louchen.top/2020/07/20200708104942.png" style="zoom:80%;" />

<blockquote>
<p>servlet为例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"收到请求了"</span>);</span><br><span class="line">    request.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">    String user1 = request.getParameter(<span class="string">"user"</span>);</span><br><span class="line">    String id = request.getParameter(<span class="string">"id"</span>);</span><br><span class="line">    String username = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line">    String password = request.getParameter(<span class="string">"password"</span>);</span><br><span class="line">    System.out.println(<span class="string">"url中的参数："</span>+user1);</span><br><span class="line">    System.out.println(<span class="string">"data中的参数："</span>+id);</span><br><span class="line">    System.out.println(<span class="string">"data中的参数："</span>+username);</span><br><span class="line">    System.out.println(<span class="string">"data中的参数："</span>+password);</span><br><span class="line">    response.setContentType(<span class="string">"text/html;charset=utf-8"</span>);</span><br><span class="line">    User user = <span class="keyword">new</span> User(<span class="number">1001</span>, <span class="string">"张三"</span>, <span class="string">"123456"</span>);</span><br><span class="line">    Gson gson=<span class="keyword">new</span> Gson();</span><br><span class="line">    <span class="comment">//将javabean转为字符串 方便在请求中传输</span></span><br><span class="line">    String s = gson.toJson(user);</span><br><span class="line">    response.getWriter().write(s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</blockquote>
<p>我们可以发现get请求在url中的参数和在data中的参数都被放在在url地址栏中，后台也能获取到全部数据</p>
<h5 id="2-发送post请求"><a href="#2-发送post请求" class="headerlink" title="2)发送post请求"></a>2)发送post请求</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script src="/webjars/jquery/3.3.1-2/jquery.min.js"&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="function">function <span class="title">jqueryPost</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        $.post(<span class="string">'ajax?user=zs&amp;pw=123&amp;r='</span>+Math.random(),&#123;<span class="string">"id"</span>:<span class="number">1111</span>,username:<span class="string">"lc"</span>,password:<span class="number">123456</span>&#125;,function (data) &#123;</span><br><span class="line">            let parse = JSON.parse(data);</span><br><span class="line">            $(<span class="string">"#text"</span>).text(parse.username+parse.id);</span><br><span class="line">        &#125;,<span class="string">'text'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;button onclick="jqueryPost()"&gt;jquery发送post请求&lt;/button&gt;</span><br><span class="line">&lt;div id="text"&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img src="http://img.louchen.top/2020/07/20200708105250.png" style="zoom:80%;" /><img src="http://img.louchen.top/2020/07/20200708105403.png" alt=""></p>
<img src="http://img.louchen.top/2020/07/20200708105403.png" style="zoom:80%;" />



<blockquote>
<p>后端就是 上面的get请求的后端</p>
</blockquote>
<p>我们可以发现发送post请求，地址栏中的参数还是在地址栏中，但是data中的数据会方法在请求体中，不会方在url中，这意味着我们的post请求可以发送大量数据。</p>
<h4 id="5、-ajax-更灵活的其他方式"><a href="#5、-ajax-更灵活的其他方式" class="headerlink" title="5、$.ajax()更灵活的其他方式"></a>5、$.ajax()更灵活的其他方式</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script src="/webjars/jquery/3.3.1-2/jquery.min.js"&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="function">function <span class="title">jqueryOther</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            <span class="comment">//1、请求地址</span></span><br><span class="line">            url:<span class="string">'ajax?user=zs&amp;pw=123&amp;r='</span>+Math.random(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">//2、请求类型</span></span><br><span class="line">            <span class="comment">//请求类型(默认为get)  post,get,delete,put</span></span><br><span class="line">            <span class="comment">//注意get没有请求体只能在url中传输参数，其他类型有请求体，参数可以在请求体中</span></span><br><span class="line">            type:<span class="string">'get'</span>,</span><br><span class="line"></span><br><span class="line">            <span class="comment">//3、请求参数。</span></span><br><span class="line">            <span class="comment">//注意请求参数必须为js对象形式，不能为字符串</span></span><br><span class="line">            <span class="comment">//例如：错误写法"&#123;"id":"19321","username":"louc","password":"123456"&#125;" 这样服务端会获取不到值</span></span><br><span class="line">            <span class="comment">//允许的形式 data:'id=19321&amp;username=louc&amp;password=123456' 可以为参数形式</span></span><br><span class="line">            data:&#123;<span class="string">"id"</span>:<span class="string">"19321"</span>,<span class="string">"username"</span>:<span class="string">"louc"</span>,<span class="string">"password"</span>:<span class="string">"123456"</span>&#125;,</span><br><span class="line">            <span class="comment">// data:'id=19321&amp;username=louc&amp;password=123456',</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//4、是否异步 默认为异步</span></span><br><span class="line">            async:<span class="keyword">true</span>,</span><br><span class="line"></span><br><span class="line">            <span class="comment">//5、成功的回调</span></span><br><span class="line">            success: function (data) &#123;</span><br><span class="line">                <span class="comment">//一般data类型为字符串</span></span><br><span class="line">                let p = JSON.parse(data);</span><br><span class="line">                $(<span class="string">"#text"</span>).text(p.username+<span class="string">""</span>+p.id)</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//6、失败的回调 404 403等</span></span><br><span class="line">            error(data) &#123;</span><br><span class="line">                <span class="comment">//打印错误信息</span></span><br><span class="line">                alert(<span class="string">"错误"</span>+data)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;button onclick="jqueryOther()"&gt;jquery发送其他格式请求&lt;/button&gt;</span><br><span class="line">&lt;div id="text"&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="6、表单序列化"><a href="#6、表单序列化" class="headerlink" title="6、表单序列化"></a>6、表单序列化</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script src="/webjars/jquery/3.3.1-2/jquery.min.js"&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="function">function <span class="title">subForm</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//传统获取表单属性值</span></span><br><span class="line">        <span class="comment">// let id=$("input[name='id']").val();</span></span><br><span class="line">        <span class="comment">// let username=$("input[name='username']").val();</span></span><br><span class="line">        <span class="comment">// let password=$("input[name='password']").val();</span></span><br><span class="line">        <span class="comment">// alert(id+username+password)</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//序列化表单后，得到的字符串为 'id=19321&amp;username=louc&amp;password=123456' 形式</span></span><br><span class="line">        let formdata = $(<span class="string">"#form1"</span>).serialize();</span><br><span class="line">        alert(formdata)+</span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            url:<span class="string">"ajax?user=zs&amp;pw=123&amp;r='+Math.random()"</span>,</span><br><span class="line">            data:formdata,</span><br><span class="line">            async:<span class="keyword">true</span>,</span><br><span class="line">            type:<span class="string">'post'</span>,</span><br><span class="line">            success: function (data) &#123;</span><br><span class="line">                <span class="comment">//一般data类型为字符串</span></span><br><span class="line">                let p = JSON.parse(data);</span><br><span class="line">                $(<span class="string">"#text"</span>).text(p.username+p.id)</span><br><span class="line">            &#125;,</span><br><span class="line">            error(data) &#123;</span><br><span class="line">                alert(data)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;form action=<span class="string">"#"</span> id=<span class="string">"form1"</span>&gt;</span><br><span class="line">    id &lt;input type=<span class="string">"text"</span> name=<span class="string">"id"</span>&gt;&lt;br&gt;</span><br><span class="line">   用户名 &lt;input type=<span class="string">"text"</span> name=<span class="string">"username"</span>&gt;&lt;br&gt;</span><br><span class="line">    密码&lt;input type=<span class="string">"text"</span> name=<span class="string">"password"</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;button onclick="subForm()"&gt;提交&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;div id="text"&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h3 id="十四、JSON"><a href="#十四、JSON" class="headerlink" title="十四、JSON"></a>十四、JSON</h3><p>JSON就是表示对象的方法，格式就是按照js声明对象的格式来. json的编写必须要符合js规范。 </p>
<ul>
<li>在js中：属性加和不加双引号都可以。值为必须为js符合的类型</li>
<li>在java中：json字符串必须符合json规范，所有属性必须加双引号。</li>
</ul>
<p>转换为：JSON格式要求</p>
<ul>
<li>key(属性)  必须有双引号</li>
<li>value ： 基本类型或者引用类型(对象)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">//js对象写法 (也可以直接转为字符串，自动为属性加上引号 )</span></span><br><span class="line">   <span class="comment">// let json=&#123;name:"张三", age: 22&#125;;</span></span><br><span class="line">   <span class="comment">//json写法 属性必须加字符串</span></span><br><span class="line">   <span class="keyword">let</span> json=&#123;<span class="string">"name"</span>:<span class="string">"张三"</span>, <span class="string">"age"</span>: <span class="number">22</span>&#125;;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//将json对象转为字符串</span></span><br><span class="line">   <span class="keyword">let</span> str = <span class="built_in">JSON</span>.stringify(json);</span><br><span class="line">   <span class="comment">//&#123;"name":"张三", "age": 22&#125;</span></span><br><span class="line">   alert(str)</span><br><span class="line"></span><br><span class="line">   <span class="comment">//将字符串转为json对象/js对象</span></span><br><span class="line">   <span class="keyword">let</span> jsonstr = <span class="built_in">JSON</span>.parse(str);</span><br><span class="line"><span class="comment">//获取js对象属性值</span></span><br><span class="line">   <span class="comment">//张三</span></span><br><span class="line">   alert(jsonstr.name)</span><br></pre></td></tr></table></figure>

<h4 id="1、Gson的使用"><a href="#1、Gson的使用" class="headerlink" title="1、Gson的使用"></a>1、Gson的使用</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code.gson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="1-javabean和字符串的转换"><a href="#1-javabean和字符串的转换" class="headerlink" title="1)javabean和字符串的转换"></a>1)javabean和字符串的转换</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">      Gson gson=<span class="keyword">new</span> Gson();</span><br><span class="line">      String str=<span class="string">"&#123;id:1002,username:'zs','password':123456&#125;"</span>;</span><br><span class="line">      <span class="comment">//字符串转javabean</span></span><br><span class="line">      User user = gson.fromJson(str, User<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"><span class="comment">//User(id=1002, username=zs, password=123456)</span></span><br><span class="line">      System.out.println(user);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//javabean转字符串</span></span><br><span class="line">      String s = gson.toJson(user);</span><br><span class="line"><span class="comment">//&#123;"id":1002,"username":"zs","password":"123456"&#125;</span></span><br><span class="line">      System.out.println(s);</span><br></pre></td></tr></table></figure>

<h5 id="2-List集合和字符串的转换"><a href="#2-List集合和字符串的转换" class="headerlink" title="2)List集合和字符串的转换"></a>2)List集合和字符串的转换</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Gson gson=<span class="keyword">new</span> Gson();</span><br><span class="line">List&lt;User&gt; list=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">list.add(<span class="keyword">new</span> User(<span class="number">1001</span>,<span class="string">"zs"</span>,<span class="string">"123456"</span>));</span><br><span class="line">list.add(<span class="keyword">new</span> User(<span class="number">1001</span>,<span class="string">"ls"</span>,<span class="string">"1234"</span>));</span><br><span class="line">list.add(<span class="keyword">new</span> User(<span class="number">1001</span>,<span class="string">"ww"</span>,<span class="string">"12356"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//集合转字符串</span></span><br><span class="line">String s = gson.toJson(list);</span><br><span class="line"><span class="comment">//[&#123;"id":1001,"username":"zs","password":"123456"&#125;,&#123;"id":1001,"username":"ls","password":"1234"&#125;,&#123;"id":1001,"username":"ww","password":"12356"&#125;]</span></span><br><span class="line">System.out.println(s);</span><br><span class="line"></span><br><span class="line"><span class="comment">//字符串转集合</span></span><br><span class="line">List&lt;User&gt; list1 = gson.fromJson(s, <span class="keyword">new</span> TypeToken&lt;List&lt;User&gt;&gt;() &#123;</span><br><span class="line">&#125;.getType());</span><br><span class="line"><span class="comment">//[User(id=1001, username=zs, password=123456), User(id=1001, username=ls, password=1234), User(id=1001, username=ww, password=12356)]</span></span><br><span class="line">System.out.println(list1);</span><br></pre></td></tr></table></figure>

<h5 id="3-Map集合和字符串的转换"><a href="#3-Map集合和字符串的转换" class="headerlink" title="3)Map集合和字符串的转换"></a>3)Map集合和字符串的转换</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Gson gson=<span class="keyword">new</span> Gson();</span><br><span class="line">HashMap&lt;String,User&gt; hashMap=<span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">User user1 = <span class="keyword">new</span> User(<span class="number">1001</span>, <span class="string">"zs"</span>, <span class="string">"123456"</span>);</span><br><span class="line">User user2 = <span class="keyword">new</span> User(<span class="number">1001</span>, <span class="string">"zs"</span>, <span class="string">"123456"</span>);</span><br><span class="line">hashMap.put(<span class="string">"level1"</span>, user1);</span><br><span class="line">hashMap.put(<span class="string">"level2"</span>, user2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//map集合转为字符串</span></span><br><span class="line">String s = gson.toJson(hashMap);</span><br><span class="line"><span class="comment">//&#123;"level1":&#123;"id":1001,"username":"zs","password":"123456"&#125;,"level2":&#123;"id":1001,"username":"zs","password":"123456"&#125;&#125;</span></span><br><span class="line">System.out.println(s);</span><br><span class="line"></span><br><span class="line"><span class="comment">//字符串转为集合</span></span><br><span class="line">HashMap&lt;String,User&gt; o = gson.fromJson(s, <span class="keyword">new</span> TypeToken&lt;HashMap&lt;String, User&gt;&gt;() &#123;</span><br><span class="line">&#125;.getType());</span><br><span class="line"><span class="comment">//&#123;level1=User(id=1001, username=zs, password=123456), level2=User(id=1001, username=zs, password=123456)&#125;</span></span><br><span class="line">System.out.println(o);</span><br></pre></td></tr></table></figure>

<h3 id="十五、监听器"><a href="#十五、监听器" class="headerlink" title="十五、监听器"></a>十五、监听器</h3><p>​        监听器，字面上的理解就是监听观察某个事件（程序）的发生情况，当被监听的事件真的发生了的时候，事件发生者（事件源） 就会给注册该事件的监听者（监听器）发送消息，告诉监听者某些信息，同时监听者也可以获得一份事件对象，根据这个对象可以获得相关属性和执行相关操作。</p>
<h4 id="1、声明周期监听器。监听三个对象的生命周期-创建到消耗"><a href="#1、声明周期监听器。监听三个对象的生命周期-创建到消耗" class="headerlink" title="1、声明周期监听器。监听三个对象的生命周期(创建到消耗)"></a>1、声明周期监听器。监听三个对象的生命周期(创建到消耗)</h4><h5 id="1-监听请求-ServletRequestListener"><a href="#1-监听请求-ServletRequestListener" class="headerlink" title="1)监听请求 ServletRequestListener"></a>1)监听请求 ServletRequestListener</h5><p>来一个请求就会执行一次初始化和销毁方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestLifeListener</span> <span class="keyword">implements</span> <span class="title">ServletRequestListener</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 请求来的时候 调用requestInitialized初始化方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sre</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestInitialized</span><span class="params">(ServletRequestEvent sre)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"请求创建..."</span>);</span><br><span class="line">        <span class="comment">//获取application对象 代表整个web应用</span></span><br><span class="line">        ServletContext servletContext = sre.getServletContext();</span><br><span class="line">        <span class="comment">//获取当前请求对象</span></span><br><span class="line">        ServletRequest servletRequest = sre.getServletRequest();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 请求结束，完成响应 调用requestDestroyed销毁方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sre</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestDestroyed</span><span class="params">(ServletRequestEvent sre)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"请求销毁"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>web.xml</code>配置该监听器：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.lc.listener.RequestLifeListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-监听整个web应用-ServletContextListener"><a href="#2-监听整个web应用-ServletContextListener" class="headerlink" title="2)监听整个web应用 ServletContextListener"></a>2)监听整个web应用 ServletContextListener</h5><p>项目启动时调用一次初始化方法 。项目停止时调用销毁方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApplicationLifeListener</span> <span class="keyword">implements</span> <span class="title">ServletContextListener</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 项目启动时调用此初始化方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> servletContextEvent</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextInitialized</span><span class="params">(ServletContextEvent servletContextEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ApplicationLifeListener 初始化"</span>);</span><br><span class="line">        <span class="comment">//获取当前web对象</span></span><br><span class="line">        ServletContext servletContext = servletContextEvent.getServletContext();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 项目停止时调用此销毁方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> servletContextEvent</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextDestroyed</span><span class="params">(ServletContextEvent servletContextEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ApplicationLifeListener销毁方法..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.lc.listener.ApplicationLifeListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="3-监听会话-HttpSessionListener"><a href="#3-监听会话-HttpSessionListener" class="headerlink" title="3)监听会话 HttpSessionListener"></a>3)监听会话 HttpSessionListener</h5><p>第一次使用session才会创建，session 失效(强制实现，超时)则调用相应的销毁方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionLifeListener</span> <span class="keyword">implements</span> <span class="title">HttpSessionListener</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *第一次使用session的时候 初始化sessionCreated</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> httpSessionEvent</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionCreated</span><span class="params">(HttpSessionEvent httpSessionEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"SessionLifeListener创建..."</span>);</span><br><span class="line">        <span class="comment">//获取当前session对象</span></span><br><span class="line">        HttpSession session = httpSessionEvent.getSession();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * session失效的时候调用此 sessionDestroyed方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> httpSessionEvent</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionDestroyed</span><span class="params">(HttpSessionEvent httpSessionEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"SessionLifeListener销毁..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2、属性监听器。监听三个对象中的属性"><a href="#2、属性监听器。监听三个对象中的属性" class="headerlink" title="2、属性监听器。监听三个对象中的属性"></a>2、属性监听器。监听三个对象中的属性</h4><h5 id="1-监听请求属性-ServletRequestAttributeListener"><a href="#1-监听请求属性-ServletRequestAttributeListener" class="headerlink" title="1)监听请求属性 ServletRequestAttributeListener"></a>1)监听请求属性 <code>ServletRequestAttributeListener</code></h5><ul>
<li><p>当请求中的属性增加时调用attributeAdded方法</p>
</li>
<li><p>当请求中的属性修改时调用attributeReplaced方法</p>
</li>
<li><p>当请求中的属性移除时调用attributeRemoved方法</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestAttrListener</span> <span class="keyword">implements</span> <span class="title">ServletRequestAttributeListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 属性增加</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> servletRequestAttributeEvent</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeAdded</span><span class="params">(ServletRequestAttributeEvent servletRequestAttributeEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"添加属性..."</span>);</span><br><span class="line">        <span class="comment">//获取增加的属性key</span></span><br><span class="line">        String name = servletRequestAttributeEvent.getName();</span><br><span class="line">        <span class="comment">//获取增加的属性值</span></span><br><span class="line">        Object value = servletRequestAttributeEvent.getValue();</span><br><span class="line">        System.out.println(<span class="string">"增加的属性 key:"</span>+name+<span class="string">" value:"</span>+value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 属性移除</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> servletRequestAttributeEvent</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeRemoved</span><span class="params">(ServletRequestAttributeEvent servletRequestAttributeEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"删除属性..."</span>);</span><br><span class="line">        <span class="comment">//获取删除的属性key</span></span><br><span class="line">        String name = servletRequestAttributeEvent.getName();</span><br><span class="line">        <span class="comment">//获取删除的属性值</span></span><br><span class="line">        Object value = servletRequestAttributeEvent.getValue();</span><br><span class="line">        System.out.println(<span class="string">"删除的属性 key:"</span>+name+<span class="string">" value:"</span>+value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 属性修改</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> servletRequestAttributeEvent</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeReplaced</span><span class="params">(ServletRequestAttributeEvent servletRequestAttributeEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"修改属性..."</span>);</span><br><span class="line">        <span class="comment">//获取修改之前的属性key</span></span><br><span class="line">        String name = servletRequestAttributeEvent.getName();</span><br><span class="line">        <span class="comment">//获取修改之前的属性值</span></span><br><span class="line">        Object value = servletRequestAttributeEvent.getValue();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取请求对象</span></span><br><span class="line">        ServletRequest servletRequest = servletRequestAttributeEvent.getServletRequest();</span><br><span class="line">        <span class="comment">//获取修改之后的属性值</span></span><br><span class="line">        Object parameter =servletRequest.getAttribute(name);</span><br><span class="line">        System.out.println(<span class="string">"修改之前的属性 key:"</span>+name+<span class="string">" value:"</span>+value);</span><br><span class="line">        System.out.println(<span class="string">"修改之后的属性 key:"</span>+name+<span class="string">" value:"</span>+parameter);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.lc.listener.RequestAttrListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-监听session属性-HttpSessionAttributeListener"><a href="#2-监听session属性-HttpSessionAttributeListener" class="headerlink" title="2)监听session属性 HttpSessionAttributeListener"></a>2)监听session属性 <code>HttpSessionAttributeListener</code></h5><p>和监听请求的用法一致。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionAttrListener</span> <span class="keyword">implements</span> <span class="title">HttpSessionAttributeListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeAdded</span><span class="params">(HttpSessionBindingEvent httpSessionBindingEvent)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeRemoved</span><span class="params">(HttpSessionBindingEvent httpSessionBindingEvent)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeReplaced</span><span class="params">(HttpSessionBindingEvent httpSessionBindingEvent)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-监听web应用属性-ServletContextAttributeListener"><a href="#3-监听web应用属性-ServletContextAttributeListener" class="headerlink" title="3)监听web应用属性 ServletContextAttributeListener"></a>3)监听web应用属性 <code>ServletContextAttributeListener</code></h5><p>和监听请求的用法一致。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletContextAttrListener</span> <span class="keyword">implements</span> <span class="title">ServletContextAttributeListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeAdded</span><span class="params">(ServletContextAttributeEvent servletContextAttributeEvent)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeRemoved</span><span class="params">(ServletContextAttributeEvent servletContextAttributeEvent)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeReplaced</span><span class="params">(ServletContextAttributeEvent servletContextAttributeEvent)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3、sessions固有监听器"><a href="#3、sessions固有监听器" class="headerlink" title="3、sessions固有监听器"></a>3、sessions固有监听器</h4><h5 id="1-监听sessions活化钝化-HttpSessionActivationListener"><a href="#1-监听sessions活化钝化-HttpSessionActivationListener" class="headerlink" title="1) 监听sessions活化钝化 HttpSessionActivationListener"></a>1) 监听sessions活化钝化 <code>HttpSessionActivationListener</code></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionActivationListener</span> <span class="keyword">implements</span> <span class="title">HttpSessionActivationListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionWillPassivate</span><span class="params">(HttpSessionEvent httpSessionEvent)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionDidActivate</span><span class="params">(HttpSessionEvent httpSessionEvent)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-监听一个对象是否绑定到session中-保存在session中-HttpSessionBindingListener"><a href="#2-监听一个对象是否绑定到session中-保存在session中-HttpSessionBindingListener" class="headerlink" title="2)监听一个对象是否绑定到session中(保存在session中) HttpSessionBindingListener"></a>2)监听一个对象是否绑定到session中(保存在session中) <code>HttpSessionBindingListener</code></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionBindingListener</span> <span class="keyword">implements</span> <span class="title">HttpSessionBindingListener</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">valueBound</span><span class="params">(HttpSessionBindingEvent httpSessionBindingEvent)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">valueUnbound</span><span class="params">(HttpSessionBindingEvent httpSessionBindingEvent)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="十六、文件上传与下载"><a href="#十六、文件上传与下载" class="headerlink" title="十六、文件上传与下载"></a>十六、文件上传与下载</h3><p>文件上传的必要条件：</p>
<ul>
<li><p>指定input的类型<code>type</code>为<code>file</code></p>
<ul>
<li><code>&lt;input type=&quot;file&quot; name=&quot;img&quot;&gt;</code></li>
</ul>
</li>
<li><p>指定表单编码类型<code>enctype</code>为<code>multipart/form-data</code>多部分上传   默认为编码类型为<code>application/x-www-form-urlencoded</code></p>
</li>
<li><p>表单提交请求类型必须为<code>POST</code></p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/upload"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">    用户名 <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    头像：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"img"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"上传"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>我们发现请求类型为多部分表单数据类型。并且各部分之间的分隔符对应的为 boundary后的内容。每个input项代表一个部分，部分直接由浏览生成一个分隔符分割。</p>
<img src="http://img.louchen.top/2020/07/20200708173932.png" style="zoom: 80%;" />

<p>后端将请求流转换为字符串形式的数据。 我们可以发现请求中所有的数据被包含在流中，无法通过getParamter()获取参数</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">------WebKitFormBoundaryveRHUB7FOGYYBQ3y <span class="comment">//分隔符</span></span><br><span class="line">Content-Disposition: form-data; name=<span class="string">"username"</span>  <span class="comment">//每个部分的类型和详细信息</span></span><br><span class="line"><span class="comment">//空行后对应的为 每个部分的值</span></span><br><span class="line">admin </span><br><span class="line">------WebKitFormBoundaryveRHUB7FOGYYBQ3y</span><br><span class="line">Content-Disposition: form-data; name=<span class="string">"img"</span>; filename=<span class="string">"1.jpg"</span></span><br><span class="line">Content-Type: image/jpeg</span><br><span class="line"><span class="comment">//文件流的数据</span></span><br><span class="line">??? JFIF      ?? C	#,%!*!&amp;4'*./121%6:60:,010?? C</span><br></pre></td></tr></table></figure>

<h4 id="1、流和文件操作工具类"><a href="#1、流和文件操作工具类" class="headerlink" title="1、流和文件操作工具类"></a>1、流和文件操作工具类</h4><h5 id="commons-io-处理IO"><a href="#commons-io-处理IO" class="headerlink" title="commons-io 处理IO"></a><code>commons-io</code> 处理IO</h5><h5 id="commons-fileupload处理文件"><a href="#commons-fileupload处理文件" class="headerlink" title="commons-fileupload处理文件"></a><code>commons-fileupload</code>处理文件</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="2、文件上传"><a href="#2、文件上传" class="headerlink" title="2、文件上传"></a>2、文件上传</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=<span class="string">"/upload"</span> method=<span class="string">"post"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">    用户名 &lt;input type=<span class="string">"text"</span> name=<span class="string">"username"</span>/&gt;&lt;br&gt;</span><br><span class="line">    头像：&lt;input type=<span class="string">"file"</span> name=<span class="string">"img"</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"上传"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//不能通过 request.getParameter("username")获取参数，因为请求已经被作为流传输分成一段一段的数据部分(表单的所有项,部件)</span></span><br><span class="line">    <span class="comment">//获取请求流对象</span></span><br><span class="line">    <span class="comment">//ServletInputStream inputStream = request.getInputStream();</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//1、创建工厂实例</span></span><br><span class="line">    DiskFileItemFactory factory = <span class="keyword">new</span> DiskFileItemFactory();</span><br><span class="line">    <span class="comment">//2、创建处理文件上传的servlet对象</span></span><br><span class="line">    ServletFileUpload fileUpload = <span class="keyword">new</span> ServletFileUpload(factory);</span><br><span class="line">    <span class="comment">//3、解析文件上传请求</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//4、使用该servlet将请求解析为 多个数据部件对象。即每一项代表一个数据项。</span></span><br><span class="line">        List&lt;FileItem&gt; fileItems = fileUpload.parseRequest(request);</span><br><span class="line">        <span class="comment">//遍历该数据部件</span></span><br><span class="line">        fileItems.forEach((fileItem)-&gt;&#123;</span><br><span class="line">            <span class="comment">//如果该项为 input标签中普通的 kye-value参数形式的部件</span></span><br><span class="line">            <span class="keyword">if</span> (fileItem.isFormField()) &#123;</span><br><span class="line">                <span class="comment">//获取表单项的name值</span></span><br><span class="line">                String username = fileItem.getFieldName();</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">//获取表单项的value值 并指定编码</span></span><br><span class="line">                    String value = fileItem.getString(<span class="string">"utf-8"</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//获取表单项的文件名称 (为null) 普通input只有key-value</span></span><br><span class="line">                String filename = fileItem.getName();</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//否则为 文件对象</span></span><br><span class="line">                <span class="comment">//获取input 标签name值</span></span><br><span class="line">                String fieldName = fileItem.getFieldName();</span><br><span class="line">                <span class="comment">//获取文件名</span></span><br><span class="line">                String filename = fileItem.getName();</span><br><span class="line">                System.out.println(<span class="string">"文件name值:"</span>+fieldName);</span><br><span class="line">                System.out.println(<span class="string">"文件名:"</span>+filename);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">//得到该文件的 数据流部分</span></span><br><span class="line">                    InputStream inputStream = fileItem.getInputStream();</span><br><span class="line">                    <span class="comment">//生成随机文件名</span></span><br><span class="line">                    String s = UUID.randomUUID().toString().replaceAll(<span class="string">"-"</span>, <span class="string">""</span>);</span><br><span class="line">                    String newfileName=s+<span class="string">"_"</span>+filename;</span><br><span class="line">                    <span class="comment">//获取相对路径</span></span><br><span class="line">                    <span class="comment">//设置存放指定文件夹的绝对路径：</span></span><br><span class="line">                    String realPath = request.getServletContext().getRealPath(<span class="string">"/uploads"</span>);</span><br><span class="line">                    <span class="comment">//F:\桌面内容\springboot2\Spring+SpringMVC\servlet01\target\servlet01\uploads</span></span><br><span class="line">                    System.out.println(realPath);</span><br><span class="line">                    <span class="comment">//创建输出流并指定文件路径</span></span><br><span class="line">                    <span class="comment">//  / 代表tomcat安装的盘符  即 D:</span></span><br><span class="line">                    <span class="comment">//  . 代表tomcat安装目录下的 bin文件夹下</span></span><br><span class="line">                    FileOutputStream fileOutputStream = <span class="keyword">new</span> FileOutputStream(realPath+<span class="string">"/"</span>+newfileName);</span><br><span class="line">                    <span class="comment">//将输入流写到输出流中</span></span><br><span class="line">                    IOUtils.copy(inputStream, fileOutputStream);</span><br><span class="line">                    <span class="comment">//关流</span></span><br><span class="line">                    fileOutputStream.close();</span><br><span class="line">                    inputStream.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (FileUploadException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    response.sendRedirect(<span class="string">"/fileupload.jsp"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="http://img.louchen.top/2020/07/20200708215648.png" style="zoom:80%;" />

<p>直接在服务器访问地址：<code>http://localhost:8080/uploads/70f974b4c5544bae8ec3c55eea4c891a_1.jpg</code></p>
<h4 id="3、获取指定文件或指定文件夹的绝对路径"><a href="#3、获取指定文件或指定文件夹的绝对路径" class="headerlink" title="3、获取指定文件或指定文件夹的绝对路径"></a>3、获取指定文件或指定文件夹的绝对路径</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String realPath = request.getServletContext().getRealPath(<span class="string">"/uploads"</span>);</span><br><span class="line"><span class="comment">//F:\桌面内容\springboot2\Spring+SpringMVC\servlet01\target\servlet01\uploads</span></span><br></pre></td></tr></table></figure>

<h4 id="4、文件下载"><a href="#4、文件下载" class="headerlink" title="4、文件下载"></a>4、文件下载</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;a href="download"&gt;下载图片&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"> 	<span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">         <span class="comment">//本质就是告诉浏览器我给你资源别直接打开 给我下载</span></span><br><span class="line">        <span class="comment">//把要下载的资源传给浏览器</span></span><br><span class="line"></span><br><span class="line">        ServletContext servletContext = request.getServletContext();</span><br><span class="line">        <span class="comment">//获取该图片的绝对路径</span></span><br><span class="line">        String realPath = servletContext.getRealPath(<span class="string">"/uploads/哈哈.jpg"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//动态获取文件类型</span></span><br><span class="line">        String mimeType = servletContext.getMimeType(realPath);</span><br><span class="line">        <span class="comment">//image/jpeg</span></span><br><span class="line">        System.out.println(<span class="string">"文件类型"</span>+mimeType);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置响应头类型（这里我们是图片类型）</span></span><br><span class="line">        response.setContentType(mimeType);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 若文件名为中文 则会无法识别 (万能解决方案)</span></span><br><span class="line">        String s = <span class="keyword">new</span> String(<span class="string">"哈哈"</span>.getBytes(<span class="string">"gbk"</span>), <span class="string">"iso8859-1"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置浏览器处理的方式 即以附件形式打开</span></span><br><span class="line">        <span class="comment">// Content-Disposition   处置方式</span></span><br><span class="line">        <span class="comment">// attachment    附件</span></span><br><span class="line">        <span class="comment">// filename=文件名</span></span><br><span class="line">        response.setHeader(<span class="string">"Content-Disposition"</span>,<span class="string">"attachment;filename="</span>+s);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置文件大小(可选) 一般不设置</span></span><br><span class="line"><span class="comment">//        response.setContentLength();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//得到输入流</span></span><br><span class="line">        FileInputStream fileInputStream = <span class="keyword">new</span> FileInputStream(realPath);</span><br><span class="line">        ServletOutputStream outputStream = response.getOutputStream();</span><br><span class="line">        <span class="comment">//将输入流拷贝到响应输出流</span></span><br><span class="line">        IOUtils.copy(fileInputStream, outputStream);</span><br><span class="line">        <span class="comment">//关流</span></span><br><span class="line">        outputStream.close();</span><br><span class="line">        fileInputStream.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>点击下载，发现此时并没有打开，而是直接以附件形式打开</p>
<img src="http://img.louchen.top/2020/07/20200709100848.png" style="zoom:80%;" />



<p>我们查看响应头</p>
<img src="http://img.louchen.top/2020/07/20200709101044.png" style="zoom:80%;" />

<h3 id="十七、javaweb项目部署tomcat"><a href="#十七、javaweb项目部署tomcat" class="headerlink" title="十七、javaweb项目部署tomcat"></a>十七、javaweb项目部署tomcat</h3><p>1、一般我们通过maven打成war包部署</p>
<img src="http://img.louchen.top/2020/07/20200709110428.png" style="zoom:80%;" />

<p>2、生成的war包在指定的项目的target目录下</p>
<img src="http://img.louchen.top/2020/07/20200709110549.png" style="zoom:80%;" />

<p>3、将项目的war包 servlet01.war直接复制到tomcat安装目录下的webapp目录下</p>
<img src="http://img.louchen.top/2020/07/20200709110748.png" style="zoom:80%;" />

<p>4、进入tomcat安装目录下的bin目录下执行startup.bat 批处理指令</p>
<img src="http://img.louchen.top/2020/07/20200709110934.png" style="zoom:80%;" />

<p>5、执行后会把webapp下的servlet01.war的war包自动解压生成项目文件夹</p>
<img src="http://img.louchen.top/2020/07/20200709111119.png" style="zoom:80%;" />

<p>6、控制台启动成功，输入浏览器访问</p>
<img src="http://img.louchen.top/2020/07/20200709111315.png" style="zoom:80%;" />

<p>注意：这里访问必须携带项目文件夹名称，所有在项目中有路径访问时，必须要动态获取项目文件，否则会找不到。</p>
<p><code>http://localhost:8080/servlet01/downloadimg.jsp</code></p>
<h3 id="十八、创建自定义服务"><a href="#十八、创建自定义服务" class="headerlink" title="十八、创建自定义服务"></a>十八、创建自定义服务</h3><p>我们每次手动执行启动startup.bat文件时不免麻烦。我们可以为此该批处理命令创建一个服务</p>
<p>1、以管理员身份打开cmd窗口</p>
<p>2、进入tomcat下的bin目录</p>
<p>3、使用<code>service bat install 服务名</code>   创建服务(Tomcat7.0)</p>
<img src="http://img.louchen.top/2020/07/20200709111937.png" style="zoom:80%;" />

<p>4、启动服务</p>
<p>这里我们需要进入到任务管理器中才能查看到服务</p>
<img src="http://img.louchen.top/2020/07/20200709112557.png" style="zoom:80%;" />

<p>5、删除服务</p>
<p><code>sc delete 服务名</code></p>
</div><div class="article-tags size-small is-uppercase mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Servlet/">Servlet</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/img/pay.jpg" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/07/24/ssm/Spring/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">深入理解Spring</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/07/24/springsecurity/SpringSecurity%E9%A1%B9%E7%9B%AE%E9%97%AE%E9%A2%98/"><span class="level-item">SpringSecurity项目使用总结</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="" src="/img/milk.png" alt="娄晨"></figure><p class="title is-size-4 is-block line-height-inherit">娄晨</p><p class="is-size-6 is-block">学生</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国·武汉</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">71</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">19</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">42</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded cursor:pointer" href="/img/wechart.jpg" target="_blank" rel="noopener">联系我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ppoffice"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="is-flex" href="#一、Servlet作用"><span class="mr-2">1</span><span>一、Servlet作用</span></a></li><li><a class="is-flex" href="#二、Servlet创建和使用流程"><span class="mr-2">2</span><span>二、Servlet创建和使用流程</span></a></li><li><a class="is-flex" href="#三、Servlet生命周期"><span class="mr-2">3</span><span>三、Servlet生命周期</span></a><ul class="menu-list"><ul class="menu-list"><li><a class="is-flex" href="#2-重定向其它地址"><span class="mr-2">3.1.1</span><span>2)重定向其它地址</span></a></li><li><a class="is-flex" href="#3-若禁用cookie，可采用编码重定向"><span class="mr-2">3.1.2</span><span>3)若禁用cookie，可采用编码重定向</span></a></li><li><a class="is-flex" href="#4-获取响应流对象"><span class="mr-2">3.1.3</span><span>4)获取响应流对象</span></a></li></ul><li><a class="is-flex" href="#2、HttpServletRequest"><span class="mr-2">3.2</span><span>2、HttpServletRequest</span></a><ul class="menu-list"><li><a class="is-flex" href="#1-获取请求参数"><span class="mr-2">3.2.1</span><span>1)获取请求参数</span></a></li><li><a class="is-flex" href="#2-get和post请求处理乱码方式"><span class="mr-2">3.2.2</span><span>2)get和post请求处理乱码方式</span></a></li><li><a class="is-flex" href="#3-请求转发"><span class="mr-2">3.2.3</span><span>3)请求转发</span></a></li><li><a class="is-flex" href="#3-获得项目路径"><span class="mr-2">3.2.4</span><span>3)获得项目路径</span></a></li><li><a class="is-flex" href="#4-获取请求地址"><span class="mr-2">3.2.5</span><span>4)获取请求地址</span></a></li><li><a class="is-flex" href="#5-获取请求流对象"><span class="mr-2">3.2.6</span><span>5)获取请求流对象</span></a></li></ul></li><li><a class="is-flex" href="#3、转发和重定向的区别"><span class="mr-2">3.3</span><span>3、转发和重定向的区别</span></a></li></ul></li><li><a class="is-flex" href="#五、项目路径问题"><span class="mr-2">4</span><span>五、项目路径问题</span></a><ul class="menu-list"><li><a class="is-flex" href="#1、项目路径和服务器路径的区别："><span class="mr-2">4.1</span><span>1、项目路径和服务器路径的区别：</span></a></li><li><a class="is-flex" href="#2、页面路径访问问题-在页面请求中访问servlet也如此"><span class="mr-2">4.2</span><span>2、页面路径访问问题(在页面请求中访问servlet也如此)</span></a></li><li><a class="is-flex" href="#3、Servlet中的路径问题"><span class="mr-2">4.3</span><span>3、Servlet中的路径问题</span></a></li><li><a class="is-flex" href="#2、jsp表达式，在页面输出内容"><span class="mr-2">4.4</span><span>2、jsp表达式，在页面输出内容</span></a></li><li><a class="is-flex" href="#3、声明成员-少用"><span class="mr-2">4.5</span><span>3、声明成员(少用)</span></a></li><li><a class="is-flex" href="#4、jsp注释"><span class="mr-2">4.6</span><span>4、jsp注释</span></a></li><li><a class="is-flex" href="#5、jsp指令"><span class="mr-2">4.7</span><span>5、jsp指令</span></a><ul class="menu-list"><li><a class="is-flex" href="#1-page指令"><span class="mr-2">4.7.1</span><span>1)page指令</span></a></li><li><a class="is-flex" href="#2-include指令"><span class="mr-2">4.7.2</span><span>2)include指令</span></a></li><li><a class="is-flex" href="#3-taglib指令"><span class="mr-2">4.7.3</span><span>3)taglib指令</span></a></li><li><a class="is-flex" href="#4-jsp指令"><span class="mr-2">4.7.4</span><span>4)jsp指令</span></a></li></ul></li><li><a class="is-flex" href="#6、jsp九大隐含对象"><span class="mr-2">4.8</span><span>6、jsp九大隐含对象</span></a><ul class="menu-list"><li><a class="is-flex" href="#1-隐含对象"><span class="mr-2">4.8.1</span><span>1)隐含对象</span></a></li><li><a class="is-flex" href="#2-四大域对象"><span class="mr-2">4.8.2</span><span>2)四大域对象</span></a></li></ul></li><li><a class="is-flex" href="#7、EL表达式"><span class="mr-2">4.9</span><span>7、EL表达式</span></a></li></ul></li><li><a class="is-flex" href="#七、Cookie"><span class="mr-2">5</span><span>七、Cookie</span></a><ul class="menu-list"><li><a class="is-flex" href="#1、创建cookie"><span class="mr-2">5.1</span><span>1、创建cookie</span></a></li><li><a class="is-flex" href="#2、获取cookie"><span class="mr-2">5.2</span><span>2、获取cookie</span></a></li><li><a class="is-flex" href="#3、删除cookie"><span class="mr-2">5.3</span><span>3、删除cookie</span></a></li><li><a class="is-flex" href="#4、设置cookie有效时间"><span class="mr-2">5.4</span><span>4、设置cookie有效时间</span></a></li><li><a class="is-flex" href="#5、修改cookie"><span class="mr-2">5.5</span><span>5、修改cookie</span></a></li></ul></li><li><a class="is-flex" href="#八、Session"><span class="mr-2">6</span><span>八、Session</span></a><ul class="menu-list"><li><a class="is-flex" href="#1、创建session对象并获取session-id"><span class="mr-2">6.1</span><span>1、创建session对象并获取session id</span></a></li><li><a class="is-flex" href="#2、设置sessiond的属性并获取session的属性值"><span class="mr-2">6.2</span><span>2、设置sessiond的属性并获取session的属性值</span></a></li><li><a class="is-flex" href="#3、获取session的有效时间"><span class="mr-2">6.3</span><span>3、获取session的有效时间</span></a></li><li><a class="is-flex" href="#4、设置session有效时间"><span class="mr-2">6.4</span><span>4、设置session有效时间</span></a></li><li><a class="is-flex" href="#5、设置session持久化"><span class="mr-2">6.5</span><span>5、设置session持久化</span></a></li></ul></li><li><a class="is-flex" href="#九、禁用cookie重写url"><span class="mr-2">7</span><span>九、禁用cookie重写url</span></a></li><li><a class="is-flex" href="#十、session的钝化和活化"><span class="mr-2">8</span><span>十、session的钝化和活化</span></a></li><li><a class="is-flex" href="#十一、Filter-过滤器"><span class="mr-2">9</span><span>十一、Filter 过滤器</span></a><ul class="menu-list"><li><a class="is-flex" href="#1、过滤器执行流程"><span class="mr-2">9.1</span><span>1、过滤器执行流程</span></a></li><li><a class="is-flex" href="#2、过滤器生命周期"><span class="mr-2">9.2</span><span>2、过滤器生命周期</span></a></li><li><a class="is-flex" href="#3、过滤器拦截路径规则"><span class="mr-2">9.3</span><span>3、过滤器拦截路径规则</span></a><ul class="menu-list"><li><a class="is-flex" href="#1-精确匹配"><span class="mr-2">9.3.1</span><span>1)精确匹配</span></a></li><li><a class="is-flex" href="#2-路径匹配"><span class="mr-2">9.3.2</span><span>2)路径匹配</span></a></li><li><a class="is-flex" href="#3-后缀匹"><span class="mr-2">9.3.3</span><span>3)后缀匹</span></a></li><li><a class="is-flex" href="#4-一次过滤多个拦截规则"><span class="mr-2">9.3.4</span><span>4)一次过滤多个拦截规则</span></a></li><li><a class="is-flex" href="#5-拦截指定servlet的所有请求"><span class="mr-2">9.3.5</span><span>5)拦截指定servlet的所有请求</span></a></li></ul></li><li><a class="is-flex" href="#4、filter响应中文乱码问题"><span class="mr-2">9.4</span><span>4、filter响应中文乱码问题</span></a></li><li><a class="is-flex" href="#5、各种ServletConfig-ServletContext-FilterConfig初始化参数"><span class="mr-2">9.5</span><span>5、各种ServletConfig,ServletContext,FilterConfig初始化参数</span></a><ul class="menu-list"><li><a class="is-flex" href="#1-ServletConfig"><span class="mr-2">9.5.1</span><span>1)ServletConfig</span></a></li><li><a class="is-flex" href="#2-ServletContext和FilterConfig"><span class="mr-2">9.5.2</span><span>2)ServletContext和FilterConfig</span></a></li></ul></li><li><a class="is-flex" href="#6、过滤器链"><span class="mr-2">9.6</span><span>6、过滤器链</span></a></li><li><a class="is-flex" href="#7、dispatcher"><span class="mr-2">9.7</span><span>7、dispatcher</span></a></li></ul></li><li><a class="is-flex" href="#十二、JDBC使用步骤"><span class="mr-2">10</span><span>十二、JDBC使用步骤</span></a></li><li><a class="is-flex" href="#十三、AJAX"><span class="mr-2">11</span><span>十三、AJAX</span></a><ul class="menu-list"><li><a class="is-flex" href="#1、简介"><span class="mr-2">11.1</span><span>1、简介</span></a></li><li><a class="is-flex" href="#2、js发送ajax请求"><span class="mr-2">11.2</span><span>2、js发送ajax请求</span></a></li><li><a class="is-flex" href="#3、解决ajax请求缓存问题-验证码"><span class="mr-2">11.3</span><span>3、解决ajax请求缓存问题 (验证码)</span></a></li><li><a class="is-flex" href="#4、jquery发送-post-get-请求"><span class="mr-2">11.4</span><span>4、jquery发送$.post()/$.get()请求</span></a><ul class="menu-list"><li><a class="is-flex" href="#1-发送get请求"><span class="mr-2">11.4.1</span><span>1)发送get请求</span></a></li><li><a class="is-flex" href="#2-发送post请求"><span class="mr-2">11.4.2</span><span>2)发送post请求</span></a></li></ul></li><li><a class="is-flex" href="#5、-ajax-更灵活的其他方式"><span class="mr-2">11.5</span><span>5、$.ajax()更灵活的其他方式</span></a></li><li><a class="is-flex" href="#6、表单序列化"><span class="mr-2">11.6</span><span>6、表单序列化</span></a></li></ul></li><li><a class="is-flex" href="#十四、JSON"><span class="mr-2">12</span><span>十四、JSON</span></a><ul class="menu-list"><li><a class="is-flex" href="#1、Gson的使用"><span class="mr-2">12.1</span><span>1、Gson的使用</span></a><ul class="menu-list"><li><a class="is-flex" href="#1-javabean和字符串的转换"><span class="mr-2">12.1.1</span><span>1)javabean和字符串的转换</span></a></li><li><a class="is-flex" href="#2-List集合和字符串的转换"><span class="mr-2">12.1.2</span><span>2)List集合和字符串的转换</span></a></li><li><a class="is-flex" href="#3-Map集合和字符串的转换"><span class="mr-2">12.1.3</span><span>3)Map集合和字符串的转换</span></a></li></ul></li></ul></li><li><a class="is-flex" href="#十五、监听器"><span class="mr-2">13</span><span>十五、监听器</span></a><ul class="menu-list"><li><a class="is-flex" href="#1、声明周期监听器。监听三个对象的生命周期-创建到消耗"><span class="mr-2">13.1</span><span>1、声明周期监听器。监听三个对象的生命周期(创建到消耗)</span></a><ul class="menu-list"><li><a class="is-flex" href="#1-监听请求-ServletRequestListener"><span class="mr-2">13.1.1</span><span>1)监听请求 ServletRequestListener</span></a></li><li><a class="is-flex" href="#2-监听整个web应用-ServletContextListener"><span class="mr-2">13.1.2</span><span>2)监听整个web应用 ServletContextListener</span></a></li><li><a class="is-flex" href="#3-监听会话-HttpSessionListener"><span class="mr-2">13.1.3</span><span>3)监听会话 HttpSessionListener</span></a></li></ul></li><li><a class="is-flex" href="#2、属性监听器。监听三个对象中的属性"><span class="mr-2">13.2</span><span>2、属性监听器。监听三个对象中的属性</span></a><ul class="menu-list"><li><a class="is-flex" href="#1-监听请求属性-ServletRequestAttributeListener"><span class="mr-2">13.2.1</span><span>1)监听请求属性 ServletRequestAttributeListener</span></a></li><li><a class="is-flex" href="#2-监听session属性-HttpSessionAttributeListener"><span class="mr-2">13.2.2</span><span>2)监听session属性 HttpSessionAttributeListener</span></a></li><li><a class="is-flex" href="#3-监听web应用属性-ServletContextAttributeListener"><span class="mr-2">13.2.3</span><span>3)监听web应用属性 ServletContextAttributeListener</span></a></li></ul></li><li><a class="is-flex" href="#3、sessions固有监听器"><span class="mr-2">13.3</span><span>3、sessions固有监听器</span></a><ul class="menu-list"><li><a class="is-flex" href="#1-监听sessions活化钝化-HttpSessionActivationListener"><span class="mr-2">13.3.1</span><span>1) 监听sessions活化钝化 HttpSessionActivationListener</span></a></li><li><a class="is-flex" href="#2-监听一个对象是否绑定到session中-保存在session中-HttpSessionBindingListener"><span class="mr-2">13.3.2</span><span>2)监听一个对象是否绑定到session中(保存在session中) HttpSessionBindingListener</span></a></li></ul></li></ul></li><li><a class="is-flex" href="#十六、文件上传与下载"><span class="mr-2">14</span><span>十六、文件上传与下载</span></a><ul class="menu-list"><li><a class="is-flex" href="#1、流和文件操作工具类"><span class="mr-2">14.1</span><span>1、流和文件操作工具类</span></a><ul class="menu-list"><li><a class="is-flex" href="#commons-io-处理IO"><span class="mr-2">14.1.1</span><span>commons-io 处理IO</span></a></li><li><a class="is-flex" href="#commons-fileupload处理文件"><span class="mr-2">14.1.2</span><span>commons-fileupload处理文件</span></a></li></ul></li><li><a class="is-flex" href="#2、文件上传"><span class="mr-2">14.2</span><span>2、文件上传</span></a></li><li><a class="is-flex" href="#3、获取指定文件或指定文件夹的绝对路径"><span class="mr-2">14.3</span><span>3、获取指定文件或指定文件夹的绝对路径</span></a></li><li><a class="is-flex" href="#4、文件下载"><span class="mr-2">14.4</span><span>4、文件下载</span></a></li></ul></li><li><a class="is-flex" href="#十七、javaweb项目部署tomcat"><span class="mr-2">15</span><span>十七、javaweb项目部署tomcat</span></a></li><li><a class="is-flex" href="#十八、创建自定义服务"><span class="mr-2">16</span><span>十八、创建自定义服务</span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="http://vhr.louchen.top/index.html" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">人事管理</span></span><span class="level-right"><span class="level-item tag">vhr.louchen.top</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/IDEA/"><span class="level-start"><span class="level-item">IDEA</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/JVM/"><span class="level-start"><span class="level-item">JVM</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/JavaWeb/"><span class="level-start"><span class="level-item">JavaWeb</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Java%E5%9F%BA%E7%A1%80/"><span class="level-start"><span class="level-item">Java基础</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/MySQL/"><span class="level-start"><span class="level-item">MySQL</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Redis/"><span class="level-start"><span class="level-item">Redis</span></span><span class="level-end"><span class="level-item tag">15</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/SSM/"><span class="level-start"><span class="level-item">SSM</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Spring/"><span class="level-start"><span class="level-item">Spring</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Spring-Boot/"><span class="level-start"><span class="level-item">Spring Boot</span></span><span class="level-end"><span class="level-item tag">22</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Spring-Cache/"><span class="level-start"><span class="level-item">Spring Cache</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Spring-Security/"><span class="level-start"><span class="level-item">Spring Security</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/SpringBoot/"><span class="level-start"><span class="level-item">SpringBoot</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/SpringMVC/"><span class="level-start"><span class="level-item">SpringMVC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%AE%B9%E5%99%A8%E5%8C%96%E6%8A%80%E6%9C%AF/"><span class="level-start"><span class="level-item">容器化技术</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"><span class="level-start"><span class="level-item">并发编程</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/"><span class="level-start"><span class="level-item">版本管理工具</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E9%83%A8%E7%BD%B2/"><span class="level-start"><span class="level-item">项目构建部署</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/"><span class="level-start"><span class="level-item">项目部署</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="订阅"></div></div></form></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-30T13:33:41.737Z">2020-08-30</time></p><p class="title is-6"><a class="link-muted" href="/2020/08/30/docker_linux_nginx_git_maven_gradle/gradle%E8%AF%A6%E8%A7%A3/">Gradle详解(待续)</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/">版本管理工具</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-30T13:33:41.720Z">2020-08-30</time></p><p class="title is-6"><a class="link-muted" href="/2020/08/30/docker_linux_nginx_git_maven_gradle/Git%E8%AF%A6%E8%A7%A3/">Git详解</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/">版本管理工具</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-30T13:33:41.696Z">2020-08-30</time></p><p class="title is-6"><a class="link-muted" href="/2020/08/30/docker_linux_nginx_git_maven_gradle/github%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/">github搜索技巧</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/">版本管理工具</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-30T13:33:41.660Z">2020-08-30</time></p><p class="title is-6"><a class="link-muted" href="/2020/08/30/docker_linux_nginx_git_maven_gradle/Maven%E8%AF%A6%E8%A7%A3/">Maven详解</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/">版本管理工具</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-30T13:32:38.191Z">2020-08-30</time></p><p class="title is-6"><a class="link-muted" href="/2020/08/30/docker_linux_nginx_git_maven_gradle/Nginx%E8%AF%A6%E8%A7%A3/">Nginx详解</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/">项目部署</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/07/"><span class="level-start"><span class="level-item">七月 2020</span></span><span class="level-end"><span class="level-item tag">62</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/ActiveMQ/"><span class="tag">ActiveMQ</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker/"><span class="tag">Docker</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ehcache/"><span class="tag">Ehcache</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/FastDFS/"><span class="tag">FastDFS</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Git/"><span class="tag">Git</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Gradle/"><span class="tag">Gradle</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/IDEA/"><span class="tag">IDEA</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JAR/"><span class="tag">JAR</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JDK1-8/"><span class="tag">JDK1.8</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JVM/"><span class="tag">JVM</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JWT/"><span class="tag">JWT</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java%E5%9F%BA%E7%A1%80/"><span class="tag">Java基础</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Maven/"><span class="tag">Maven</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MongoDB/"><span class="tag">MongoDB</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MySQL/"><span class="tag">MySQL</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Nginx/"><span class="tag">Nginx</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OAuth2/"><span class="tag">OAuth2</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Quartz/"><span class="tag">Quartz</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RESTful/"><span class="tag">RESTful</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RabbitMQ/"><span class="tag">RabbitMQ</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Redis/"><span class="tag">Redis</span><span class="tag is-grey-lightest">16</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SSM/"><span class="tag">SSM</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Servlet/"><span class="tag">Servlet</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Session/"><span class="tag">Session</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Shiro/"><span class="tag">Shiro</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Spring/"><span class="tag">Spring</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Spring-Boot/"><span class="tag">Spring Boot</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Spring-Security/"><span class="tag">Spring Security</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SpringBoot/"><span class="tag">SpringBoot</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SpringMVC/"><span class="tag">SpringMVC</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Swagger2/"><span class="tag">Swagger2</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WAR/"><span class="tag">WAR</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WebSocket/"><span class="tag">WebSocket</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/"><span class="tag">代理模式</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8F%8D%E5%B0%84/"><span class="tag">反射</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90/"><span class="tag">多数据源</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"><span class="tag">多线程</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/"><span class="tag">定时任务</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B3%9B%E5%9E%8B/"><span class="tag">泛型</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B6%88%E6%81%AF%E6%9C%8D%E5%8A%A1/"><span class="tag">消息服务</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1/"><span class="tag">邮件服务</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/favicon.ico" alt="MilkLc" height="28"></a><p class="size-small"><span>&copy; 2020 lc</span>  Powered by <a href="#" target="_blank" rel="noopener">LouChen</a>  </p><p class="size-small"><a href="http://www.miitbeian.gov.cn">鄂ICP备19030764号-1</a></p></div><div style="margin-left:-150px"><span id="busuanzi_container_site_pv">本站总访问量 <span id="busuanzi_value_site_pv" style="color:blue;font-size: 17px"></span> 次</span><span class="post-meta-divider"> | </span><span id="busuanzi_container_site_uv" style="display:none">本站访客数 <span id="busuanzi_value_site_uv" style="color:blue;font-size: 17px"></span> 人</span><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'http://yoursite.com',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>