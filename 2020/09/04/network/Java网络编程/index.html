<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Java网络编程初识 - MilkLc</title><meta description="一、网络体系结构通过网络发送数据是一项复杂的操作，必须仔细地协调网络的物理特性以及所发送数据的逻辑特征。通过网络将数据从一台主机发送到另外的主机，这个过程是通过计算机网络通信来完成。 　　网络通信的不同方面被分解为多个层，层与层之间用接口连接。通信的双方具有相同的层次，层次实现的功能由协议数据单元（PDU）来描述。不同系统中的同一层构成对等层，对等层之间通过对等层协议进行通信，理解批次定义好的规则"><meta property="og:type" content="blog"><meta property="og:title" content="Java网络编程初识"><meta property="og:url" content="http://yoursite.com/2020/09/04/network/Java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"><meta property="og:site_name" content="MilkLc"><meta property="og:description" content="一、网络体系结构通过网络发送数据是一项复杂的操作，必须仔细地协调网络的物理特性以及所发送数据的逻辑特征。通过网络将数据从一台主机发送到另外的主机，这个过程是通过计算机网络通信来完成。 　　网络通信的不同方面被分解为多个层，层与层之间用接口连接。通信的双方具有相同的层次，层次实现的功能由协议数据单元（PDU）来描述。不同系统中的同一层构成对等层，对等层之间通过对等层协议进行通信，理解批次定义好的规则"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://img.louchen.top/2020/07/20200702121107.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200702121341.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200702150808.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200702234709.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200703111726.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200703111741.png"><meta property="og:image" content="http://img.louchen.top/2020/07/20200703143442.png"><meta property="article:published_time" content="2020-09-04T00:12:57.458Z"><meta property="article:modified_time" content="2020-09-04T00:16:28.207Z"><meta property="article:author" content="lc"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="http://img.louchen.top/2020/07/20200702121107.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://yoursite.com/2020/09/04/network/Java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"},"headline":"MilkLc","image":["http://img.louchen.top/2020/07/20200702121107.png","http://img.louchen.top/2020/07/20200702121341.png","http://img.louchen.top/2020/07/20200702150808.png","http://img.louchen.top/2020/07/20200702234709.png","http://img.louchen.top/2020/07/20200703111726.png","http://img.louchen.top/2020/07/20200703111741.png","http://img.louchen.top/2020/07/20200703143442.png"],"datePublished":"2020-09-04T00:12:57.458Z","dateModified":"2020-09-04T00:16:28.207Z","author":{"@type":"Person","name":"lc"},"description":"一、网络体系结构通过网络发送数据是一项复杂的操作，必须仔细地协调网络的物理特性以及所发送数据的逻辑特征。通过网络将数据从一台主机发送到另外的主机，这个过程是通过计算机网络通信来完成。 　　网络通信的不同方面被分解为多个层，层与层之间用接口连接。通信的双方具有相同的层次，层次实现的功能由协议数据单元（PDU）来描述。不同系统中的同一层构成对等层，对等层之间通过对等层协议进行通信，理解批次定义好的规则"}</script><link rel="canonical" href="http://yoursite.com/2020/09/04/network/Java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/favicon.ico" alt="MilkLc" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/RoyalNeverG"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><input placeholder="你想要查找什么？" type="text"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-09-04T00:12:57.458Z" title="2020-09-04T00:12:57.458Z">2020-09-04</time><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span><span class="level-item">1 小时 读完 (大约 6869 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">Java网络编程初识</h1><div class="content"><h3 id="一、网络体系结构"><a href="#一、网络体系结构" class="headerlink" title="一、网络体系结构"></a>一、网络体系结构</h3><p>通过网络发送数据是一项复杂的操作，必须仔细地协调网络的物理特性以及所发送数据的逻辑特征。通过网络将数据从一台主机发送到另外的主机，这个过程是通过计算机网络通信来完成。</p>
<p>　　网络通信的不同方面被分解为多个层，层与层之间用接口连接。通信的双方具有相同的层次，层次实现的功能由协议数据单元（PDU）来描述。不同系统中的同一层构成对等层，对等层之间通过对等层协议进行通信，理解批次定义好的规则和约定。每一层表示为物理硬件（即线缆和电流）与所传输信息之间的不同抽象层次。在理论上，每一层只与紧挨其上和其下的层对话。将网络分层，这样就可以修改甚至替换某一层的软件，只要层与层之间的接口保持不变，就不会影响到其他层。</p>
<p>　　计算机网络体系结构是计算机网络层次和协议的集合，网络体系结构对计算机网络实现的功能，以及网络协议、层次、接口和服务进行了描述，但并不涉及具体的实现。接口是同一节点内相邻层之间交换信息的连接处，也叫服务访问点（SAP）。</p>
<h4 id="1、OSI七层模型-与-TCP-IP四层模型"><a href="#1、OSI七层模型-与-TCP-IP四层模型" class="headerlink" title="1、OSI七层模型 与 TCP/IP四层模型"></a>1、OSI七层模型 与 TCP/IP四层模型</h4><p>我们现在互联网大都使用TCP/IP模型</p>
<img src="http://img.louchen.top/2020/07/20200702121107.png" style="zoom: 67%;" />

<img src="http://img.louchen.top/2020/07/20200702121341.png" style="zoom: 67%;" />
<a id="more"></a>
##### ①应用层

<p><strong>应用层(application-layer）的任务是通过应用进程间的交互来完成特定网络应用。</strong>应用层协议定义的是应用进程（进程：主机中正在运行的程序）间的通信和交互的规则。对于不同的网络应用需要不同的应用层协议。在互联网中应用层协议很多，如<strong>域名系统DNS</strong>，支持万维网应用的 <strong>HTTP协议</strong>，支持电子邮件的 <strong>SMTP协议</strong>等等。我们把应用层交互的数据单元称为报文。</p>
<h5 id="②运输层"><a href="#②运输层" class="headerlink" title="②运输层"></a>②运输层</h5><p><strong>运输层(transport layer)的主要任务就是负责向两台主机进程之间的通信提供通用的数据传输服务</strong>。应用进程利用该服务传送应用层报文。“通用的”是指并不针对某一个特定的网络应用，而是多种应用可以使用同一个运输层服务。由于一台主机可同时运行多个线程，因此运输层有复用和分用的功能。所谓复用就是指多个应用层进程可同时使用下面运输层的服务，分用和复用相反，是运输层把收到的信息分别交付上面应用层中的相应进程。</p>
<p><strong>运输层主要使用以下两种协议:</strong></p>
<ol>
<li><strong>传输控制协议 TCP</strong>（Transmission Control Protocol）–提供<strong>面向连接</strong>的，<strong>可靠的</strong>数据传输服务。</li>
<li><strong>用户数据协议 UDP</strong>（User Datagram Protocol）–提供<strong>无连接</strong>的，尽最大努力的数据传输服务（<strong>不保证数据传输的可靠性</strong>）。</li>
</ol>
<h5 id="③网络层"><a href="#③网络层" class="headerlink" title="③网络层"></a>③网络层</h5><p><strong>在 计算机网络中进行通信的两个计算机之间可能会经过很多个数据链路，也可能还要经过很多通信子网。网络层的任务就是选择合适的网间路由和交换结点， 确保数据及时传送。</strong> 在发送数据时，网络层把运输层产生的报文段或用户数据报封装成分组和包进行传送。在 TCP/IP 体系结构中，由于网络层使用 <strong>IP 协议</strong>，因此分组也叫 <strong>IP 数据报</strong> ，简称 <strong>数据报</strong>。</p>
<p>这里要注意：<strong>不要把运输层的“用户数据报 UDP ”和网络层的“ IP 数据报”弄混</strong>。另外，无论是哪一层的数据单元，都可笼统地用“分组”来表示。</p>
<p>这里强调指出，网络层中的“网络”二字已经不是我们通常谈到的具体网络，而是指计算机网络体系结构模型中第三层的名称.</p>
<p>互联网是由大量的异构（heterogeneous）网络通过路由器（router）相互连接起来的。互联网使用的网络层协议是无连接的网际协议（Intert Protocol）和许多路由选择协议，因此互联网的网络层也叫做<strong>网际层</strong>或<strong>IP层</strong>。</p>
<h5 id="④数据链路层"><a href="#④数据链路层" class="headerlink" title="④数据链路层"></a>④数据链路层</h5><p><strong>数据链路层(data link layer)通常简称为链路层。两台主机之间的数据传输，总是在一段一段的链路上传送的，这就需要使用专门的链路层的协议。</strong> 在两个相邻节点之间传送数据时，<strong>数据链路层将网络层交下来的 IP 数据报组装成帧</strong>，在两个相邻节点间的链路上传送帧。每一帧包括数据和必要的控制信息（如同步信息，地址信息，差错控制等）。</p>
<p>在接收数据时，控制信息使接收端能够知道一个帧从哪个比特开始和到哪个比特结束。这样，数据链路层在收到一个帧后，就可从中提出数据部分，上交给网络层。 控制信息还使接收端能够检测到所收到的帧中有误差错。如果发现差错，数据链路层就简单地丢弃这个出了差错的帧，以避免继续在网络中传送下去白白浪费网络资源。如果需要改正数据在链路层传输时出现差错（这就是说，数据链路层不仅要检错，而且还要纠错），那么就要采用可靠性传输协议来纠正出现的差错。这种方法会使链路层的协议复杂些。</p>
<h5 id="⑤物理层"><a href="#⑤物理层" class="headerlink" title="⑤物理层"></a>⑤物理层</h5><p>在物理层上所传送的数据单位是比特。 <strong>物理层(physical layer)的作用是实现相邻计算机节点之间比特流的透明传送，尽可能屏蔽掉具体传输介质和物理设备的差异。</strong> 使其上面的数据链路层不必考虑网络的具体传输介质是什么。“透明传送比特流”表示经实际电路传送后的比特流没有发生变化，对传送的比特流来说，这个电路好像是看不见的。</p>
<p>在互联网使用的各种协中最重要和最著名的就是 TCP/IP 两个协议。现在人们经常提到的TCP/IP并不一定单指TCP和IP这两个具体的协议，而往往表示互联网所使用的整个TCP/IP协议族。</p>
<h3 id="二、传输层中TCP与UDP的区别"><a href="#二、传输层中TCP与UDP的区别" class="headerlink" title="二、传输层中TCP与UDP的区别"></a>二、传输层中TCP与UDP的区别</h3><img src="http://img.louchen.top/2020/07/20200702150808.png" style="zoom: 50%;" />

<ul>
<li><p><strong>TCP(传输控制)协议</strong></p>
<ul>
<li>使用TCP协议前，须先建立TCP连接，形成传输数据通道 </li>
<li>传输前，采用“三次握手”方式，点对点通信，是可靠的 </li>
<li>TCP协议进行通信的两个应用进程：客户端、服务端</li>
<li>在连接中可<strong>进行大数据量的传输</strong></li>
<li>传输完毕，需释放已建立的连接，采用“四次挥手”的方式，效率低</li>
</ul>
</li>
<li><p><strong>UDP(用户数据报)协议：</strong> </p>
<ul>
<li>将数据、源、目的封装成数据包，<strong>不需要建立连接</strong> </li>
<li>每个数据报的大小限制在<strong>64K内</strong> </li>
<li>发送不管对方是否准备好，接收方收到也不确认，故是<strong>不可靠的</strong> </li>
<li>可以<strong>广播发送</strong></li>
<li>发送数据结束时无需释放资源，开销小，速度快</li>
</ul>
</li>
</ul>
<p><strong>应用：</strong></p>
<p>UDP 在传送数据之前不需要先建立连接，远地主机在收到 UDP 报文后，不需要给出任何确认。虽然 UDP 不提供可靠交付，但在某些情况下 UDP 确是一种最有效的工作方式（一般用于即时通信），比如： QQ 语音、 QQ 视频 、直播等等</p>
<p>TCP 提供面向连接的服务。在传送数据之前必须先建立连接，数据传送结束后要释放连接。 TCP 不提供广播或多播服务。由于 TCP 要提供可靠的，面向连接的传输服务（TCP的可靠体现在TCP在传递数据之前，会有三次握手来建立连接，而且在数据传递时，有确认、窗口、重传、拥塞控制机制，在数据传完后，还会断开连接用来节约系统资源），这一难以避免增加了许多开销，如确认，流量控制，计时器以及连接管理等。这不仅使协议数据单元的首部增大很多，还要占用许多处理机资源。TCP 一般用于文件传输、发送和接收邮件、远程登录等场景。</p>
<h3 id="三、TCP连接三次握手四次挥手"><a href="#三、TCP连接三次握手四次挥手" class="headerlink" title="三、TCP连接三次握手四次挥手"></a>三、TCP连接三次握手四次挥手</h3><h4 id="TCP数据报格式："><a href="#TCP数据报格式：" class="headerlink" title="TCP数据报格式："></a><strong>TCP数据报格式：</strong></h4><img src="http://img.louchen.top/2020/07/20200702234709.png" style="zoom: 80%;" />

<blockquote>
<p>报文段首部各个字段的含义：</p>
</blockquote>
<ul>
<li><strong>源端口号以及目的端口号</strong>：各占2个字节，端口是传输层和应用层的服务接口，用于寻找发送端和接收端的进程，一般来讲，通过<strong>端口号和IP地址</strong>，可以唯一确定一个TCP连接，在网络编程中，通常被称为一个socket接口。</li>
<li><strong>序号</strong>：seq(sequence)序号，占4个字节、32位。用来标识从TCP发送端向TCP接收端发送的数据字节流。发起方发送数据时对此进行标记。例如，一段报文的序号字段值是 301 ，而携带的数据共有100字段，显然下一个报文段（如果还有的话）的数据序号应该从401开始；</li>
<li><strong>确认序号</strong>：ack(acknowledge)序号，占4个字节、32位。包含发送确认的一端所期望收到的下一个序号。只有ACK标记位为1时，确认序号字段才有效，因此，确认序号应该是上次已经成功收到数据字节序号加1，即Ack=Seq + 1。</li>
<li><strong>数据偏移</strong>：占4个字节，用于指出TCP首部长度，若不存在选项，则这个值为20字节，数据偏移的最大值为60字节。</li>
<li><strong>保留字段</strong>占6位，暂时可忽略，值全为0。</li>
<li><strong>标志位，6个</strong><ul>
<li>URG(紧急)：为1时表明紧急指针字段有效</li>
<li>ACK(确认)：为1时表明确认号字段有效。TCP规定，在连接建立后所有报文的传输都必须把ACK置1；</li>
<li>PSH(推送)：为1时接收方应尽快将这个报文段交给应用层</li>
<li>RST(复位)：为1时表明TCP连接出现故障必须重建连接</li>
<li>SYN(同步)：在连接建立时用来同步序号。当SYN=1，ACK=0，表明是连接请求报文，若同意连接，则响应报文中应该使SYN=1，ACK=1；</li>
<li>FIN(终止)：为1时表明发送端数据发送完毕要求释放连接</li>
</ul>
</li>
<li><strong>接收窗口：</strong>占2个字节，用于流量控制和拥塞控制，表示当前接收缓冲区的大小。在计算机网络中，通常是用接收方的接收能力的大小来控制发送方的数据发送量。TCP连接的一端根据缓冲区大小确定自己的接收窗口值，告诉对方，使对方可以确定发送数据的字节数。</li>
<li><strong>校验和：</strong>占2个字节，范围包括首部和数据两部分。</li>
<li>选项是可选的，默认情况是不选。</li>
</ul>
<h4 id="①三次握手"><a href="#①三次握手" class="headerlink" title="①三次握手"></a>①三次握手</h4><img src="http://img.louchen.top/2020/07/20200703111726.png" style="zoom: 67%;" />

<img src="http://img.louchen.top/2020/07/20200703111741.png" style="zoom:50%;" />



<p><strong>最开始的时候客户端和服务器都是处于CLOSED状态。主动打开连接的为客户端，被动打开连接的是服务器。</strong></p>
<ul>
<li><p>第一次握手(客户端发送请求)：</p>
<ul>
<li>客户端向服务端发送SYN=1标志位的数据包，表明客户端发送一个需要建立连接的请求。<strong>这时服务端可以得出我能收到客户端的消息</strong></li>
</ul>
</li>
<li><p>第二次握手(服务端回传确认)：</p>
<ul>
<li>服务端收到客户端的连接请求后，向客户端发送SYN=1和ACK=1标志位的数据包，客户端确认收到服务端的消息。<strong>客户端在这时可以得出我发的消息服务端能够收到，服务端发的消息我也能收到</strong></li>
</ul>
</li>
<li><p>第三次握手(客户端回传确认)：</p>
<ul>
<li>客户端发送ACK=1确认标志位的数据包给服务端，服务端收到请求后，<strong>这时服务端可以得到我发送的消息客户端能够收到</strong>。</li>
</ul>
</li>
</ul>
<p><strong>注意</strong></p>
<ul>
<li><p>握手过程中传送的包里不包含数据，三次握手完毕后，客户端与服务器才正式开始传送数据。</p>
</li>
<li><p><strong>三次握手最主要的目的就是双方确认自己与对方的发送与接收是正常的。</strong>三次握手就能确认双发收发功能都正常，缺一不可</p>
</li>
</ul>
<h5 id="1-为什么TCP客户端最后还要发送一次确认呢？"><a href="#1-为什么TCP客户端最后还要发送一次确认呢？" class="headerlink" title="1)为什么TCP客户端最后还要发送一次确认呢？"></a>1)为什么TCP客户端最后还要发送一次确认呢？</h5><p>主要防止已经失效的连接请求报文突然又传送到了服务器，从而产生错误。</p>
<p>​        如果使用的是两次握手建立连接，假设有这样一种场景，客户端发送了第一个请求连接并且没有丢失，只是因为在网络结点中滞留的时间太长了，由于TCP的客户端迟迟没有收到确认报文，以为服务器没有收到，此时重新向服务器发送这条报文，此后客户端和服务器经过两次握手完成连接，传输数据，然后关闭连接。此时此前滞留的那一次请求连接，网络通畅了到达了服务器，这个报文本该是失效的，但是，两次握手的机制将会让客户端和服务器再次建立连接，这将导致不必要的错误和资源的浪费。</p>
<p>​        如果采用的是三次握手，就算是那一次失效的报文传送过来了，服务端接受到了那条失效报文并且回复了确认报文，但是客户端不会再次发出确认。由于服务器收不到确认，就知道客户端并没有请求连接。</p>
<h4 id="②四次挥手"><a href="#②四次挥手" class="headerlink" title="②四次挥手"></a>②四次挥手</h4><img src="http://img.louchen.top/2020/07/20200703143442.png" style="zoom: 50%;" />

<p>数据传输完毕后，双方都可释放连接。最开始的时候，客户端和服务器都是处于ESTABLISHED状态，然后客户端主动关闭，服务器被动关闭。</p>
<ul>
<li>第一次挥手：<ul>
<li>客户端向服务端发送一个FIN=1的标志位的数据包，表示客户端想要断开连接。此时服务端收到这条请求，但是不一定能够断开请求，可能客户端发送的数据完毕，而我服务端的数据还正在传输，即服务端可能还未准备完毕。</li>
</ul>
</li>
<li>第二次挥手：<ul>
<li>服务端向客户端发送ACK=1标志位的确认报文段数据包，客户端收到消息后，表示服务端已经知道我要断开连接了，服务端正在做断开连接的工作</li>
</ul>
</li>
<li>第三次挥手：<ul>
<li>等待一段时间后，服务端再次向客户端发送FIN=1标志位的数据包，表示服务端的断开之前的工作准备完毕，可以断开了</li>
</ul>
</li>
<li>第四次挥手<ul>
<li>客户端发送ACK=1标志位的确认报文段的数据包，表示客户端知道服务端已经准备好了。服务端收确认消息后即可断开连接</li>
</ul>
</li>
</ul>
<h4 id="③为什么连接的时候是三次握手，关闭的时候却是四次挥手？"><a href="#③为什么连接的时候是三次握手，关闭的时候却是四次挥手？" class="headerlink" title="③为什么连接的时候是三次握手，关闭的时候却是四次挥手？"></a>③为什么连接的时候是三次握手，关闭的时候却是四次挥手？</h4><p>​        因为当服务端收到客户端的SYN连接请求报文后，可以直接发送SYN+ACK报文。其中ACK报文是用来应答的，SYN报文是用来同步的。但是关闭连接时，当服务端收到FIN报文时，很可能并不会立即关闭socket，所以只能先回复一个ACK报文，告诉客户端，“你发的FIN报文，我收到了”。只有等到服务端所有的报文都发送完了，我才能发送FIN报文，因此不能一起发送，故需要四步挥手。</p>
<h4 id="④为什么客户端最后还要等待2MSL？"><a href="#④为什么客户端最后还要等待2MSL？" class="headerlink" title="④为什么客户端最后还要等待2MSL？"></a>④为什么客户端最后还要等待2MSL？</h4><p>客户端收到后就给服务器一个回信，为了防止回信丢失，客户端就再等2MSL个时间，之所以是2个，是因为涉及到来回，第一个MSL中是回信在路上的最大时间，第二个MSL是万一回信没到服务端，服务端重发的FIN确认在路上的时间</p>
<p><a href="https://www.cnblogs.com/swordfall/p/10781281.html#auto_id_7">https://www.cnblogs.com/swordfall/p/10781281.html#auto_id_7</a></p>
<p><a href="https://blog.csdn.net/qzcsu/article/details/72861891">https://blog.csdn.net/qzcsu/article/details/72861891</a></p>
<h3 id="四、网络通信的三要素"><a href="#四、网络通信的三要素" class="headerlink" title="四、网络通信的三要素"></a>四、网络通信的三要素</h3><h4 id="1、IP地址"><a href="#1、IP地址" class="headerlink" title="1、IP地址"></a>1、IP地址</h4><ul>
<li>唯一的标识 Internet 上的计算机（通信实体） </li>
<li>本地回环地址(hostAddress)：127.0.0.1      主机名(hostName)：localhost </li>
<li>IP地址分类方式1：IPV4 和 IPV6 <ul>
<li>IPV4：4个字节组成，4个0-255。大概42亿，30亿都在北美，亚洲4亿。2011年初已 经用尽。以点分十进制表示，如192.168.0.1 </li>
<li>IPV6：128位（16个字节），写成8个无符号整数，每个整数用四个十六进制位表示， 数之间用冒号（：）分开，如：3ffe:3201:1401:1280:c8ff:fe4d:db39:1984 </li>
</ul>
</li>
<li>IP地址分类方式2：公网地址(万维网使用)和私有地址(局域网使用)。192.168. 开头的就是私有址址，范围即为192.168.0.0–192.168.255.255，专门为组织机 构内部使用 </li>
</ul>
<h4 id="2、端口号"><a href="#2、端口号" class="headerlink" title="2、端口号"></a>2、端口号</h4><ul>
<li>端口号标识正在计算机上运行的进程（程序） </li>
<li>不同的进程有不同的端口号 </li>
<li>被规定为一个 16 位的整数 0~65535。</li>
<li>端口分类： <ul>
<li>公认端口：0~1023。被预先定义的服务通信占用（如：HTTP占用端口 80，FTP占用端口21，Telnet占用端口23）</li>
<li>注册端口：1024~49151。分配给用户进程或应用程序。（如：Tomcat占 用端口8080，MySQL占用端口3306，Oracle占用端口1521等）。 </li>
<li>动态/私有端口：49152~65535。 、</li>
</ul>
</li>
<li>端口号与IP地址的组合得出一个网络套接字：Socket。</li>
</ul>
<h4 id="3、网络通信协议"><a href="#3、网络通信协议" class="headerlink" title="3、网络通信协议"></a>3、网络通信协议</h4><p>计算机网络中实现通信必须有一些约定，即通信协议，对速率、传输代码、代 码结构、传输控制步骤、出错控制等制定标准。 </p>
<ul>
<li><p>传输层协议中有两个非常重要的协议：</p>
<ul>
<li>传输控制协议TCP(Transmission Control Protocol)</li>
<li>用户数据报协议UDP(User Datagram Protocol)。</li>
</ul>
</li>
<li><p>TCP/IP 以其两个主要协议：传输控制协议(TCP)和网络互联协议(IP)而得 名，实际上是一组协议，包括多个具有不同功能且互为关联的协议。</p>
</li>
<li><p>IP(Internet Protocol)协议是网络层的主要协议，支持网间互连的数据通信</p>
</li>
<li><p>TCP/IP协议模型从更实用的角度出发，形成了高效的四层体系结构，即 物理链路层、IP层、传输层和应用层</p>
</li>
</ul>
<h3 id="五、TCP网络编程"><a href="#五、TCP网络编程" class="headerlink" title="五、TCP网络编程"></a>五、TCP网络编程</h3><h4 id="1、概述"><a href="#1、概述" class="headerlink" title="1、概述"></a>1、概述</h4><p>TCP通信能实现两台计算机直接的交互，通信的两端，要严格区分客户端和服务端</p>
<p><strong>两端通信时步骤：</strong></p>
<p>①服务端程序首先启动，等待客户端的连接</p>
<p>②客户端主动连接服务器，连接成功才能进行通信。服务端不可以主动连接客户端</p>
<p><strong>在Java中，提供两类用于实现TCP通信程序：</strong></p>
<ul>
<li>客户端<code>java.net.Socket</code>类表示。创建<code>Socket</code>对象，向服务端发出连接请求，服务端响应请求，两者建立连接开始通信</li>
<li>服务端<code>java.net.ServerSocket</code>类表示。创建<code>ServerSocekt</code>对象。相当于开启一个服务，并等待客户端的连接</li>
</ul>
<h4 id="2、Socket类"><a href="#2、Socket类" class="headerlink" title="2、Socket类"></a><strong>2、Socket</strong>类</h4><p>该类实现客户端套接字（也称为“套接字”）。 套接字是两台机器之间通讯的端点</p>
<ul>
<li>利用套接字(Socket)开发网络应用程序早已被广泛的采用，以至于成为事实 上的标准</li>
<li>网络上具有唯一标识的IP地址和端口号组合在一起才能构成唯一能识别的标 识符套接字。</li>
<li>通信的两端都要有Socket，是两台机器间通信的端点。 </li>
<li>网络通信其实就是Socket间的通信。</li>
<li>Socket允许程序把网络连接当成一个流，数据在两个Socket间通过IO传输。 </li>
<li>一般主动发起通信的应用程序属客户端，等待通信请求的为服务端。</li>
<li>Socket分类<ul>
<li>流套接字（stream socket）：使用TCP提供可依赖的字节流服务</li>
<li>数据报套接字（datagram socket）：使用UDP提供“尽力而为”的数据报服务</li>
</ul>
</li>
</ul>
<h5 id="①构造方法"><a href="#①构造方法" class="headerlink" title="①构造方法"></a>①构造方法</h5><ul>
<li>host: 服务器主机的名称或者IP地址</li>
<li>port :端口号</li>
</ul>
<p><code>Socket(String host, int port)</code>  创建流套接字并将其连接到指定主机上的指定端口号。</p>
<h5 id="②实例方法"><a href="#②实例方法" class="headerlink" title="②实例方法"></a>②实例方法</h5><p><code>OutputStream getOutputStream()</code>  返回此套接字的输出流。(向服务端发送数据)</p>
<p><code>InputStream getInputStream()</code>  返回此套接字的输入流。(接收服务端的数据)</p>
<p><code>void shutdownOutput()</code>  禁用此套接字的输出流(加入终止符)， 对于TCP套接字，任何先前写入的数据将被发送，随后是TCP的正常连接终止序列。 如果在套接字上调用shutdownOutput（）之后写入套接字输出流，则流将抛出IOException。 </p>
<p><code>void close()</code>  关闭此套接字</p>
<h4 id="3、ServerSocket"><a href="#3、ServerSocket" class="headerlink" title="3、ServerSocket"></a>3、ServerSocket</h4><p>这个类实现了服务器套接字。 服务器套接字等待通过网络进入的请求。  它根据该请求执行一些操作，然后可能将结果返回给请求者。 </p>
<h5 id="①构造方法-1"><a href="#①构造方法-1" class="headerlink" title="①构造方法"></a>①构造方法</h5><p><code>ServerSocket(int port)</code>   创建绑定到指定端口的服务器套接字。 (创建服务器，并指定端口)</p>
<h5 id="②实例方法-1"><a href="#②实例方法-1" class="headerlink" title="②实例方法"></a>②实例方法</h5><p><code>Socket accept()</code>  侦听要连接到此套接字并接受它。 (帧听客户端的请求，若帧听到则返回此客户端的Socket对象)</p>
<h5 id="③通过accept获取的Socket对象"><a href="#③通过accept获取的Socket对象" class="headerlink" title="③通过accept获取的Socket对象"></a>③通过accept获取的Socket对象</h5><p><code>InputStream getInputStream()</code>  返回此套接字的输入流。(接收客户端的数据)</p>
<p><code>OutputStream getOutputStream()</code>  返回此套接字的输出流。(向客户端发送数据)</p>
<h4 id="4、实验步骤"><a href="#4、实验步骤" class="headerlink" title="4、实验步骤"></a>4、实验步骤</h4><h5 id="1-服务端"><a href="#1-服务端" class="headerlink" title="1)服务端"></a>1)服务端</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TCPServer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//1、创建服务器，并指定端口</span></span><br><span class="line">        ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(<span class="number">9001</span>);</span><br><span class="line">        System.out.println(<span class="string">"服务端已启动...正在监听:"</span>);</span><br><span class="line">        <span class="comment">//2、帧听客户端的请求，若帧听到则返回此客户端的Socket对象</span></span><br><span class="line">        Socket accept = serverSocket.accept();</span><br><span class="line">        <span class="comment">//3、使用Socket中的getInputStream方法获取网络字节输入流对象InputStream(接收客户端发送的数据)</span></span><br><span class="line">        InputStream is = accept.getInputStream();</span><br><span class="line">        <span class="comment">//4、读取客户端发送的数据</span></span><br><span class="line">        <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="comment">//注意若采取while循环的方式读取，那么最后一次读取则将未读取到任何值，则会阻塞</span></span><br><span class="line">        <span class="keyword">int</span> read = is.read(bytes);</span><br><span class="line">        System.out.println(<span class="string">"接收客服端的数据:"</span>);</span><br><span class="line">        System.out.println(<span class="keyword">new</span> String(bytes,<span class="number">0</span>,read));</span><br><span class="line">        <span class="comment">//5、使用Socket中的getOutputStream方法获取网络字节输出流对象OutputStream(向客户端发送数据)</span></span><br><span class="line">        OutputStream os = accept.getOutputStream();</span><br><span class="line">        <span class="comment">//6、向客户端发送数据</span></span><br><span class="line">        os.write(<span class="string">"服务端已接收到数据...谢谢！"</span>.getBytes());</span><br><span class="line">        os.flush();</span><br><span class="line">        <span class="comment">//7、关闭套接字</span></span><br><span class="line">        accept.close();</span><br><span class="line">        serverSocket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-客户端"><a href="#2-客户端" class="headerlink" title="2)客户端"></a>2)客户端</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TCPClient</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//1、绑定服务端的地址并指定端口，获得socket对象</span></span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(<span class="string">"127.0.0.1"</span>, <span class="number">9001</span>);</span><br><span class="line">        <span class="comment">//2、通过socket对象中的getOutputStream()方法获取网络字节数出流对象OutputStream(向服务端发送数据)</span></span><br><span class="line">        OutputStream os = socket.getOutputStream();</span><br><span class="line">        <span class="comment">//3、向服务端发送数据</span></span><br><span class="line">        os.write(<span class="string">"我向服务端发送了一条数据..."</span>.getBytes());</span><br><span class="line">        <span class="comment">//4、使用Socket对象中的getInputStream()方法获取网络字节输入流对象InputStream</span></span><br><span class="line">        InputStream is = socket.getInputStream();</span><br><span class="line">        <span class="comment">//5、接收服务端的数据</span></span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        System.out.println(<span class="string">"客户端接收的数据:"</span>);</span><br><span class="line">        <span class="keyword">while</span> ((len = is.read(bytes))!= -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(len);</span><br><span class="line">            System.out.println(<span class="keyword">new</span> String(bytes,<span class="number">0</span>,len));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//6、关闭套接字,释放资源</span></span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="六、文件上传案例"><a href="#六、文件上传案例" class="headerlink" title="六、文件上传案例"></a>六、文件上传案例</h3><h4 id="1、服务端"><a href="#1、服务端" class="headerlink" title="1、服务端"></a>1、服务端</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TCPServer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//1、创建客户端</span></span><br><span class="line">        ServerSocket serverSocket=<span class="keyword">new</span> ServerSocket(<span class="number">9001</span>);</span><br><span class="line">        <span class="comment">//创建线程池保持并发率</span></span><br><span class="line">        ExecutorService pool = Executors.newCachedThreadPool();</span><br><span class="line">        <span class="comment">//一直保持客户端的监听</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            Socket accept = serverSocket.accept();</span><br><span class="line">            pool.execute(()-&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">//2、监听客户端</span></span><br><span class="line">                    <span class="comment">//3、获得客户的输入流</span></span><br><span class="line">                    InputStream is = accept.getInputStream();</span><br><span class="line">                    File file = <span class="keyword">new</span> File(<span class="string">"F:/upload"</span>);</span><br><span class="line">                    <span class="comment">//4、判断服务器上传的指定目录是否存在</span></span><br><span class="line">                    <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">                        file.mkdir();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//名称随机</span></span><br><span class="line">                    String filename = System.currentTimeMillis() + <span class="keyword">new</span> Random().nextInt(<span class="number">100</span>) + <span class="string">".jpg"</span>;</span><br><span class="line">                    <span class="comment">//5、创建输出流向指定目录服务端写数据</span></span><br><span class="line">                    FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(file + <span class="string">"/"</span> + filename);</span><br><span class="line">                    <span class="comment">//、读取客户端数据</span></span><br><span class="line">                    <span class="keyword">int</span> len;</span><br><span class="line">                    <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">                    System.out.println(<span class="string">"ssssss1111"</span>);</span><br><span class="line">                    <span class="comment">//注意：socket中获取的InputStream中read()方法本身是一个阻塞方法，若读取到的数据默认没有终止符，则会一直阻塞。</span></span><br><span class="line">                    <span class="comment">//所以我们客户端在上传文件时需要手动添加终止符</span></span><br><span class="line">                    <span class="keyword">while</span> ((len = is.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                        <span class="comment">//写入到目录</span></span><br><span class="line">                        fos.write(bytes, <span class="number">0</span>, len);</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(<span class="string">"ssssss22222"</span>);</span><br><span class="line">                    OutputStream os = accept.getOutputStream();</span><br><span class="line">                    os.write(<span class="string">"上传文件成功"</span>.getBytes());</span><br><span class="line">                    fos.close();</span><br><span class="line">                    accept.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//始终监听客户端, 不用关闭服务器</span></span><br><span class="line"><span class="comment">//        serverSocket.close();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2、客户端"><a href="#2、客户端" class="headerlink" title="2、客户端"></a>2、客户端</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TCPCilent</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//1、获得数据源(即上传的文件)</span></span><br><span class="line">        FileInputStream fis=<span class="keyword">new</span> FileInputStream(<span class="string">"F:/test/1.jpg"</span>);</span><br><span class="line">        <span class="comment">//2、绑定服务器</span></span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(<span class="string">"127.0.0.1"</span>, <span class="number">9001</span>);</span><br><span class="line">        <span class="comment">//3、获得字节输出流 (上传文件)</span></span><br><span class="line">        OutputStream os = socket.getOutputStream();</span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">while</span> ((len = fis.read(bytes))!=-<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">//注意：我们客户端在向客户端写入数据时，并没有在数据默认添加终止符。</span></span><br><span class="line">            os.write(bytes, <span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//手动添加终止符</span></span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line">        System.out.println(<span class="string">"ccccc1111"</span>);</span><br><span class="line">        <span class="comment">//4、读取服务端的数据</span></span><br><span class="line">        InputStream is = socket.getInputStream();</span><br><span class="line">        <span class="keyword">while</span> ((len = is.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> String(bytes,<span class="number">0</span>,len));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"ccccc22222"</span>);</span><br><span class="line">        fis.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/img/pay.jpg" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/09/04/network/HTTP%E8%AF%A6%E8%A7%A3/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">初识HTTP</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/09/04/docker_linux_nginx_git_maven_gradle/Shell%E7%BC%96%E7%A8%8B/"><span class="level-item">Shell入门姿势</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="" src="/img/milk.png" alt="娄晨"></figure><p class="title is-size-4 is-block line-height-inherit">娄晨</p><p class="is-size-6 is-block">学生</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国·武汉</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">74</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">20</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">43</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded cursor:pointer" href="/img/wechart.jpg" target="_blank" rel="noopener">联系我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ppoffice"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="is-flex" href="#一、网络体系结构"><span class="mr-2">1</span><span>一、网络体系结构</span></a><ul class="menu-list"><li><a class="is-flex" href="#1、OSI七层模型-与-TCP-IP四层模型"><span class="mr-2">1.1</span><span>1、OSI七层模型 与 TCP/IP四层模型</span></a><ul class="menu-list"><li><a class="is-flex" href="#②运输层"><span class="mr-2">1.1.1</span><span>②运输层</span></a></li><li><a class="is-flex" href="#③网络层"><span class="mr-2">1.1.2</span><span>③网络层</span></a></li><li><a class="is-flex" href="#④数据链路层"><span class="mr-2">1.1.3</span><span>④数据链路层</span></a></li><li><a class="is-flex" href="#⑤物理层"><span class="mr-2">1.1.4</span><span>⑤物理层</span></a></li></ul></li></ul></li><li><a class="is-flex" href="#二、传输层中TCP与UDP的区别"><span class="mr-2">2</span><span>二、传输层中TCP与UDP的区别</span></a></li><li><a class="is-flex" href="#三、TCP连接三次握手四次挥手"><span class="mr-2">3</span><span>三、TCP连接三次握手四次挥手</span></a><ul class="menu-list"><li><a class="is-flex" href="#TCP数据报格式："><span class="mr-2">3.1</span><span>TCP数据报格式：</span></a></li><li><a class="is-flex" href="#①三次握手"><span class="mr-2">3.2</span><span>①三次握手</span></a><ul class="menu-list"><li><a class="is-flex" href="#1-为什么TCP客户端最后还要发送一次确认呢？"><span class="mr-2">3.2.1</span><span>1)为什么TCP客户端最后还要发送一次确认呢？</span></a></li></ul></li><li><a class="is-flex" href="#②四次挥手"><span class="mr-2">3.3</span><span>②四次挥手</span></a></li><li><a class="is-flex" href="#③为什么连接的时候是三次握手，关闭的时候却是四次挥手？"><span class="mr-2">3.4</span><span>③为什么连接的时候是三次握手，关闭的时候却是四次挥手？</span></a></li><li><a class="is-flex" href="#④为什么客户端最后还要等待2MSL？"><span class="mr-2">3.5</span><span>④为什么客户端最后还要等待2MSL？</span></a></li></ul></li><li><a class="is-flex" href="#四、网络通信的三要素"><span class="mr-2">4</span><span>四、网络通信的三要素</span></a><ul class="menu-list"><li><a class="is-flex" href="#1、IP地址"><span class="mr-2">4.1</span><span>1、IP地址</span></a></li><li><a class="is-flex" href="#2、端口号"><span class="mr-2">4.2</span><span>2、端口号</span></a></li><li><a class="is-flex" href="#3、网络通信协议"><span class="mr-2">4.3</span><span>3、网络通信协议</span></a></li></ul></li><li><a class="is-flex" href="#五、TCP网络编程"><span class="mr-2">5</span><span>五、TCP网络编程</span></a><ul class="menu-list"><li><a class="is-flex" href="#1、概述"><span class="mr-2">5.1</span><span>1、概述</span></a></li><li><a class="is-flex" href="#2、Socket类"><span class="mr-2">5.2</span><span>2、Socket类</span></a><ul class="menu-list"><li><a class="is-flex" href="#①构造方法"><span class="mr-2">5.2.1</span><span>①构造方法</span></a></li><li><a class="is-flex" href="#②实例方法"><span class="mr-2">5.2.2</span><span>②实例方法</span></a></li></ul></li><li><a class="is-flex" href="#3、ServerSocket"><span class="mr-2">5.3</span><span>3、ServerSocket</span></a><ul class="menu-list"><li><a class="is-flex" href="#①构造方法-1"><span class="mr-2">5.3.1</span><span>①构造方法</span></a></li><li><a class="is-flex" href="#②实例方法-1"><span class="mr-2">5.3.2</span><span>②实例方法</span></a></li><li><a class="is-flex" href="#③通过accept获取的Socket对象"><span class="mr-2">5.3.3</span><span>③通过accept获取的Socket对象</span></a></li></ul></li><li><a class="is-flex" href="#4、实验步骤"><span class="mr-2">5.4</span><span>4、实验步骤</span></a><ul class="menu-list"><li><a class="is-flex" href="#1-服务端"><span class="mr-2">5.4.1</span><span>1)服务端</span></a></li><li><a class="is-flex" href="#2-客户端"><span class="mr-2">5.4.2</span><span>2)客户端</span></a></li></ul></li></ul></li><li><a class="is-flex" href="#六、文件上传案例"><span class="mr-2">6</span><span>六、文件上传案例</span></a><ul class="menu-list"><li><a class="is-flex" href="#1、服务端"><span class="mr-2">6.1</span><span>1、服务端</span></a></li><li><a class="is-flex" href="#2、客户端"><span class="mr-2">6.2</span><span>2、客户端</span></a></li></ul></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="http://vhr.louchen.top/index.html" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">人事管理</span></span><span class="level-right"><span class="level-item tag">vhr.louchen.top</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/IDEA/"><span class="level-start"><span class="level-item">IDEA</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/JVM/"><span class="level-start"><span class="level-item">JVM</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/JavaWeb/"><span class="level-start"><span class="level-item">JavaWeb</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Java%E5%9F%BA%E7%A1%80/"><span class="level-start"><span class="level-item">Java基础</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/MySQL/"><span class="level-start"><span class="level-item">MySQL</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Redis/"><span class="level-start"><span class="level-item">Redis</span></span><span class="level-end"><span class="level-item tag">15</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/SSM/"><span class="level-start"><span class="level-item">SSM</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Spring/"><span class="level-start"><span class="level-item">Spring</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Spring-Boot/"><span class="level-start"><span class="level-item">Spring Boot</span></span><span class="level-end"><span class="level-item tag">22</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Spring-Cache/"><span class="level-start"><span class="level-item">Spring Cache</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Spring-Security/"><span class="level-start"><span class="level-item">Spring Security</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/SpringBoot/"><span class="level-start"><span class="level-item">SpringBoot</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/SpringMVC/"><span class="level-start"><span class="level-item">SpringMVC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%AE%B9%E5%99%A8%E5%8C%96%E6%8A%80%E6%9C%AF/"><span class="level-start"><span class="level-item">容器化技术</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"><span class="level-start"><span class="level-item">并发编程</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/"><span class="level-start"><span class="level-item">版本管理工具</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"><span class="level-start"><span class="level-item">计算机网络</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E9%83%A8%E7%BD%B2/"><span class="level-start"><span class="level-item">项目构建部署</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/"><span class="level-start"><span class="level-item">项目部署</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="订阅"></div></div></form></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-09-04T00:12:57.459Z">2020-09-04</time></p><p class="title is-6"><a class="link-muted" href="/2020/09/04/network/HTTP%E8%AF%A6%E8%A7%A3/">初识HTTP</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-09-04T00:12:57.458Z">2020-09-04</time></p><p class="title is-6"><a class="link-muted" href="/2020/09/04/network/Java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/">Java网络编程初识</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-09-04T00:09:54.041Z">2020-09-04</time></p><p class="title is-6"><a class="link-muted" href="/2020/09/04/docker_linux_nginx_git_maven_gradle/Shell%E7%BC%96%E7%A8%8B/">Shell入门姿势</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Linux/">Linux</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-30T13:33:41.737Z">2020-08-30</time></p><p class="title is-6"><a class="link-muted" href="/2020/08/30/docker_linux_nginx_git_maven_gradle/gradle%E8%AF%A6%E8%A7%A3/">Gradle详解(待续)</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/">版本管理工具</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-30T13:33:41.720Z">2020-08-30</time></p><p class="title is-6"><a class="link-muted" href="/2020/08/30/docker_linux_nginx_git_maven_gradle/Git%E8%AF%A6%E8%A7%A3/">Git详解</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/">版本管理工具</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/09/"><span class="level-start"><span class="level-item">九月 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/07/"><span class="level-start"><span class="level-item">七月 2020</span></span><span class="level-end"><span class="level-item tag">62</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/ActiveMQ/"><span class="tag">ActiveMQ</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker/"><span class="tag">Docker</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ehcache/"><span class="tag">Ehcache</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/FastDFS/"><span class="tag">FastDFS</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Git/"><span class="tag">Git</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Gradle/"><span class="tag">Gradle</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/IDEA/"><span class="tag">IDEA</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JAR/"><span class="tag">JAR</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JDK1-8/"><span class="tag">JDK1.8</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JVM/"><span class="tag">JVM</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JWT/"><span class="tag">JWT</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java%E5%9F%BA%E7%A1%80/"><span class="tag">Java基础</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Maven/"><span class="tag">Maven</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MongoDB/"><span class="tag">MongoDB</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MySQL/"><span class="tag">MySQL</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Nginx/"><span class="tag">Nginx</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OAuth2/"><span class="tag">OAuth2</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Quartz/"><span class="tag">Quartz</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RESTful/"><span class="tag">RESTful</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RabbitMQ/"><span class="tag">RabbitMQ</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Redis/"><span class="tag">Redis</span><span class="tag is-grey-lightest">16</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SSM/"><span class="tag">SSM</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Servlet/"><span class="tag">Servlet</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Session/"><span class="tag">Session</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Shell/"><span class="tag">Shell</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Shiro/"><span class="tag">Shiro</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Spring/"><span class="tag">Spring</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Spring-Boot/"><span class="tag">Spring Boot</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Spring-Security/"><span class="tag">Spring Security</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SpringBoot/"><span class="tag">SpringBoot</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SpringMVC/"><span class="tag">SpringMVC</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Swagger2/"><span class="tag">Swagger2</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WAR/"><span class="tag">WAR</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WebSocket/"><span class="tag">WebSocket</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/"><span class="tag">代理模式</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8F%8D%E5%B0%84/"><span class="tag">反射</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90/"><span class="tag">多数据源</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"><span class="tag">多线程</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/"><span class="tag">定时任务</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B3%9B%E5%9E%8B/"><span class="tag">泛型</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B6%88%E6%81%AF%E6%9C%8D%E5%8A%A1/"><span class="tag">消息服务</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1/"><span class="tag">邮件服务</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/favicon.ico" alt="MilkLc" height="28"></a><p class="size-small"><span>&copy; 2020 lc</span>  Powered by <a href="#" target="_blank" rel="noopener">LouChen</a>  </p><p class="size-small"><a href="http://www.miitbeian.gov.cn">鄂ICP备19030764号-1</a></p></div><div style="margin-left:-150px"><span id="busuanzi_container_site_pv">本站总访问量 <span id="busuanzi_value_site_pv" style="color:blue;font-size: 17px"></span> 次</span><span class="post-meta-divider"> | </span><span id="busuanzi_container_site_uv" style="display:none">本站访客数 <span id="busuanzi_value_site_uv" style="color:blue;font-size: 17px"></span> 人</span><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'http://yoursite.com',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>